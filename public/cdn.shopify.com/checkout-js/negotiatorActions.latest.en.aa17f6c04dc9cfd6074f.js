(self.webpackJsonp=self.webpackJsonp||[]).push([["negotiatorActions"],{"+NgB":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var a=n("FR+n");function o(e,t){let n;return t.syncWithStorage("idempotency-token"),n=t.get("idempotency-token",{scope:a.e}),n||(n=function(e){return`${e}-${Math.random().toString()}`}(e),t.createUpdate("idempotency-token")(n)),n}function i(e){e.remove("idempotency-token")}},"7wJB":function(e,t,n){"use strict";n.r(t),n.d(t,"getNegotiationInput",(function(){return k})),n.d(t,"complete",(function(){return de})),n.d(t,"negotiate",(function(){return K}));var a=n("ZdUm"),o=n("RO6n"),i=n("JYIk"),r=n("+NgB"),s=n("bo7c");let d;!function(e){e.Integer="INTEGER",e.JsonString="JSON_STRING",e.String="STRING"}(d||(d={}));var l=JSON.parse('{"id":"70b5709782eb3f2e0efa9b478281faf2f6fc5eefa2957d86575cb443e3016dbc","name":"SubmitForCompletion","source":"mutation SubmitForCompletion($input:NegotiationInput!,$attemptToken:String!,$metafields:[MetafieldInput!],$postPurchaseInquiryResult:PostPurchaseInquiryResultCode){submitForCompletion(input:$input attemptToken:$attemptToken metafields:$metafields postPurchaseInquiryResult:$postPurchaseInquiryResult){...on SubmitSuccess{receipt{...ReceiptDetails __typename}__typename}...on SubmitAlreadyAccepted{receipt{...ReceiptDetails __typename}__typename}...on SubmitFailed{reason __typename}...on SubmitRejected{buyerProposal{...BuyerProposalDetails __typename}sellerProposal{...ProposalDetails __typename}presentment{...PresentmentMerchandiseTerms __typename}violations{...on NegotiationError{code localizedMessage nonLocalizedMessage localizedMessageHtml...on RemoveTermViolation{message{code localizedDescription __typename}target __typename}...on AcceptNewTermViolation{message{code localizedDescription __typename}target __typename}...on ConfirmChangeViolation{message{code localizedDescription __typename}from to __typename}...on UnprocessableTermViolation{message{code localizedDescription __typename}target __typename}...on UnresolvableTermViolation{message{code localizedDescription __typename}target __typename}...on InputValidationError{field __typename}__typename}__typename}__typename}...on Throttled{pollAfter pollUrl queueToken buyerProposal{...BuyerProposalDetails __typename}__typename}...on CheckpointDenied{redirectUrl __typename}...on SubmittedForCompletion{receipt{...ReceiptDetails __typename}__typename}__typename}}fragment ReceiptDetails on Receipt{...on ProcessedReceipt{id token classicThankYouPageUrl orderIdentity{buyerIdentifier id __typename}shopPayArtifact{optIn{vaultPhone __typename}__typename}purchaseOrder{...ReceiptPurchaseOrder __typename}orderCreationStatus{__typename}paymentDetails{creditCardLastFourDigits __typename}shopAppLinksAndResources{mobileUrl qrCodeUrl canTrackOrderUpdates shopInstallmentsViewSchedules shopInstallmentsMobileUrl installmentsHighlightEligible mobileUrlAttributionPayload shopAppEligible shopAppQrCodeKillswitch shopPayOrder buyerHasShopApp buyerHasShopPay orderUpdateOptions __typename}postPurchasePageRequested postPurchaseVaultedPaymentMethodStatus __typename}...on ProcessingReceipt{id pollDelay __typename}...on ActionRequiredReceipt{id action{...on CompletePaymentChallenge{offsiteRedirect url __typename}__typename}__typename}...on FailedReceipt{id processingError{...on InventoryClaimFailure{__typename}...on InventoryReservationFailure{__typename}...on OrderCreationFailure{paymentsHaveBeenReverted __typename}...on OrderCreationSchedulingFailure{__typename}...on PaymentFailed{code messageUntranslated __typename}...on DiscountUsageLimitExceededFailure{__typename}...on CustomerPersistenceFailure{__typename}__typename}__typename}__typename}fragment ReceiptPurchaseOrder on PurchaseOrder{__typename totalAmountToPay{amount currencyCode __typename}delivery{...on PurchaseOrderDeliveryTerms{deliveryLines{__typename deliveryStrategy{handle title description methodType pickupLocation{...on PickupInStoreLocation{name address{address1 address2 city countryCode zoneCode postalCode phone coordinates{latitude longitude __typename}__typename}instructions __typename}__typename}__typename}lineAmount{amount currencyCode __typename}destinationAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}__typename}groupType}__typename}__typename}payment{...on PurchaseOrderPaymentTerms{billingAddress{__typename...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}}paymentLines{amount{amount currencyCode __typename}postPaymentMessage dueAt paymentMethod{...on DirectPaymentMethod{sessionId paymentMethodIdentifier creditCard{brand __typename}billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on PurchaseOrderGiftCardPaymentMethod{code __typename}...on WalletPaymentMethod{name walletContent{...on ShopPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}sessionToken paymentMethodIdentifier __typename}...on PaypalWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}email payerId token __typename}...on ApplePayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}data signature version __typename}...on GooglePayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}signature signedMessage protocolVersion __typename}...on FacebookPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}containerData containerId mode __typename}...on ShopifyInstallmentsWalletContent{autoPayEnabled billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}disclosureDetails{evidence id type __typename}installmentsToken sessionToken __typename}__typename}__typename}...on LocalPaymentMethod{paymentMethodIdentifier name billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on PaymentOnDeliveryMethod{additionalDetails paymentInstructions paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on OffsitePaymentMethod{paymentMethodIdentifier name billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on ManualPaymentMethod{additionalDetails name paymentInstructions id paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on CustomPaymentMethod{additionalDetails name paymentInstructions id paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on DeferredPaymentMethod{paymentTermsTemplate{id dueDate dueInDays translatedName __typename}orderingIndex displayName __typename}__typename}__typename}__typename}__typename}buyerIdentity{...on PurchaseOrderBuyerIdentityTerms{contactMethod{...on PurchaseOrderEmailContactMethod{email __typename}...on PurchaseOrderSMSContactMethod{phoneNumber __typename}__typename}marketingConsent{...on PurchaseOrderEmailContactMethod{email __typename}...on PurchaseOrderSMSContactMethod{phoneNumber __typename}__typename}__typename}__typename}merchandise{merchandiseLines{merchandise{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}__typename}}fragment ProductVariantSnapshotMerchandiseDetails on ProductVariantSnapshot{variantId options{name value __typename}productTitle title sellingPlan{name id digest deliveriesPerBillingCycle prepaid subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}__typename}fragment BuyerProposalDetails on Proposal{merchandiseDiscount{...ProposalDiscountFragment __typename}deliveryDiscount{...ProposalDiscountFragment __typename}delivery{...ProposalDeliveryFragment __typename}merchandise{...on FilledMerchandiseTerms{taxesIncluded merchandiseLines{stableId merchandise{...SourceProvidedMerchandise...ProductVariantMerchandiseDetails...ContextualizedProductVariantMerchandiseDetails...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}recurringTotal{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}lineAllocations:lineComponents{...LineAllocationDetails __typename}__typename}__typename}__typename}runningTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalTaxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}deferredTotal{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}subtotalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}taxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}dueAt __typename}hasOnlyDeferredShipping subtotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}attribution{attributions{...on AttributionItem{...on RetailAttributions{deviceId locationId userId __typename}__typename}__typename}__typename}__typename}fragment ProposalDiscountFragment on DiscountTermsV2{__typename...on FilledDiscountTerms{lines{...DiscountLineDetailsFragment __typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}}fragment DiscountLineDetailsFragment on DiscountLine{allocations{...on DiscountAllocatedAllocationSet{__typename allocations{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}target{index targetType __typename}__typename}}__typename}discount{...DiscountDetailsFragment __typename}lineAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}fragment DiscountDetailsFragment on Discount{...on CustomDiscount{title presentationLevel signature signatureUuid type value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}...on CodeDiscount{title code presentationLevel __typename}...on DiscountCodeTrigger{code __typename}...on AutomaticDiscount{presentationLevel title __typename}__typename}fragment ProposalDeliveryFragment on DeliveryTerms{__typename...on FilledDeliveryTerms{intermediateRates progressiveRatesEstimatedTimeUntilCompletion shippingRatesStatusToken deliveryLines{destinationAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on Geolocation{country{code __typename}zone{code __typename}coordinates{latitude longitude __typename}__typename}...on PartialStreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}__typename}targetMerchandise{...on FilledMerchandiseLineTargetCollection{lines{stableId merchandise{...SourceProvidedMerchandise...on ProductVariantMerchandise{id digest variantId title requiresShipping properties{...MerchandiseProperties __typename}__typename}...on ContextualizedProductVariantMerchandise{id digest variantId title requiresShipping sellingPlan{id digest name prepaid deliveriesPerBillingCycle subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}properties{...MerchandiseProperties __typename}__typename}...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}groupType selectedDeliveryStrategy{...on CompleteDeliveryStrategy{handle __typename}...on DeliveryStrategyReference{handle __typename}__typename}availableDeliveryStrategies{...on CompleteDeliveryStrategy{title handle custom description acceptsInstructions phoneRequired methodType carrierName brandedPromise{logoUrl name __typename}deliveryStrategyBreakdown{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}discountRecurringCycleLimit excludeFromDeliveryOptionPrice targetMerchandise{...on FilledMerchandiseLineTargetCollection{lines{stableId merchandise{...SourceProvidedMerchandise...on ProductVariantMerchandise{id digest variantId title requiresShipping properties{...MerchandiseProperties __typename}__typename}...on ContextualizedProductVariantMerchandise{id digest variantId title requiresShipping sellingPlan{id digest name prepaid deliveriesPerBillingCycle subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}properties{...MerchandiseProperties __typename}__typename}...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}__typename}minDeliveryDateTime maxDeliveryDateTime deliveryPromisePresentmentTitle{short long __typename}trustScores{deliveryPerformanceScore __typename}estimatedTimeInTransit{...on IntIntervalConstraint{lowerBound upperBound __typename}...on IntValueConstraint{value __typename}__typename}amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}amountAfterDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}pickupLocation{...on PickupInStoreLocation{address{address1 address2 city countryCode phone postalCode zoneCode __typename}instructions name __typename}...on PickupPointLocation{address{address1 address2 address3 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}__typename}businessHours{day openingTime closingTime __typename}carrierCode carrierName handle kind name __typename}__typename}__typename}__typename}__typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}}fragment SourceProvidedMerchandise on Merchandise{...on SourceProvidedMerchandise{__typename product{id title productType vendor __typename}digest variantId optionalIdentifier title subtitle taxable giftCard requiresShipping price{amount currencyCode __typename}deferredAmount{amount currencyCode __typename}image{altText one:transformedSrc(maxWidth:64,maxHeight:64)two:transformedSrc(maxWidth:128,maxHeight:128)four:transformedSrc(maxWidth:256,maxHeight:256)__typename}options{name value __typename}properties{...MerchandiseProperties __typename}taxCode taxesIncluded weight{value unit __typename}sku}__typename}fragment MerchandiseProperties on MerchandiseProperty{name value{...on MerchandisePropertyValueString{string:value __typename}...on MerchandisePropertyValueInt{int:value __typename}...on MerchandisePropertyValueFloat{float:value __typename}...on MerchandisePropertyValueBoolean{boolean:value __typename}...on MerchandisePropertyValueJson{json:value __typename}__typename}visible __typename}fragment ProductVariantMerchandiseDetails on ProductVariantMerchandise{id digest variantId title subtitle product{id vendor productType __typename}image{altText one:transformedSrc(maxWidth:64,maxHeight:64)two:transformedSrc(maxWidth:128,maxHeight:128)four:transformedSrc(maxWidth:256,maxHeight:256)__typename}properties{...MerchandiseProperties __typename}requiresShipping options{name value __typename}sellingPlan{id subscriptionDetails{billingInterval __typename}__typename}giftCard __typename}fragment ContextualizedProductVariantMerchandiseDetails on ContextualizedProductVariantMerchandise{id digest variantId title subtitle sku price{amount currencyCode __typename}product{id vendor productType __typename}image{altText one:transformedSrc(maxWidth:64,maxHeight:64)two:transformedSrc(maxWidth:128,maxHeight:128)four:transformedSrc(maxWidth:256,maxHeight:256)__typename}properties{...MerchandiseProperties __typename}requiresShipping options{name value __typename}sellingPlan{name id digest deliveriesPerBillingCycle prepaid subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}giftCard deferredAmount{amount currencyCode __typename}__typename}fragment LineAllocationDetails on LineComponent{stableId quantity totalAmountBeforeReductions{amount currencyCode __typename}totalAmountAfterDiscounts{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}checkoutPriceAfterDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}unitPrice{price{amount currencyCode __typename}measurement{referenceUnit referenceValue __typename}__typename}allocations{...on LineComponentDiscountAllocation{discountLine{...DiscountLineDetailsFragment __typename}allocation{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}amount{amount currencyCode __typename}__typename}__typename}__typename}fragment ProposalDetails on Proposal{merchandiseDiscount{...ProposalDiscountFragment __typename}deliveryDiscount{...ProposalDiscountFragment __typename}delivery{...on FilledDeliveryTerms{intermediateRates progressiveRatesEstimatedTimeUntilCompletion shippingRatesStatusToken deliveryLines{destinationAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on Geolocation{country{code __typename}zone{code __typename}coordinates{latitude longitude __typename}__typename}...on PartialStreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}__typename}targetMerchandise{...on FilledMerchandiseLineTargetCollection{lines{stableId merchandise{...SourceProvidedMerchandise...on ProductVariantMerchandise{id digest variantId title requiresShipping properties{...MerchandiseProperties __typename}__typename}...on ContextualizedProductVariantMerchandise{id digest variantId title requiresShipping sellingPlan{id digest name prepaid deliveriesPerBillingCycle subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}properties{...MerchandiseProperties __typename}__typename}...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}groupType selectedDeliveryStrategy{...on CompleteDeliveryStrategy{handle __typename}__typename}availableDeliveryStrategies{...on CompleteDeliveryStrategy{originLocation{id __typename}title handle custom description acceptsInstructions phoneRequired methodType carrierName brandedPromise{logoUrl name __typename}deliveryStrategyBreakdown{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}discountRecurringCycleLimit excludeFromDeliveryOptionPrice targetMerchandise{...on FilledMerchandiseLineTargetCollection{lines{stableId merchandise{...SourceProvidedMerchandise...on ProductVariantMerchandise{id digest variantId title requiresShipping properties{...MerchandiseProperties __typename}__typename}...on ContextualizedProductVariantMerchandise{id digest variantId title subtitle requiresShipping sellingPlan{id digest name prepaid deliveriesPerBillingCycle subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}properties{...MerchandiseProperties __typename}__typename}...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}__typename}minDeliveryDateTime maxDeliveryDateTime deliveryPromisePresentmentTitle{short long __typename}trustScores{deliveryPerformanceScore __typename}estimatedTimeInTransit{...on IntIntervalConstraint{lowerBound upperBound __typename}...on IntValueConstraint{value __typename}__typename}amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}amountAfterDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}pickupLocation{...on PickupInStoreLocation{address{address1 address2 city countryCode phone postalCode zoneCode __typename}instructions name distanceFromBuyer{unit value __typename}__typename}...on PickupPointLocation{address{address1 address2 address3 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}__typename}businessHours{day openingTime closingTime __typename}carrierCode carrierName handle kind name __typename}__typename}__typename}__typename}__typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}__typename}payment{...on FilledPaymentTerms{availablePayments{paymentMethod{...on AnyDirectPaymentMethod{__typename availablePaymentProviders{paymentMethodIdentifier name brands orderingIndex displayName __typename}}...on AnyOffsitePaymentMethod{__typename availableOffsiteProviders{__typename paymentMethodIdentifier name paymentBrands orderingIndex}}...on DirectPaymentMethod{__typename paymentMethodIdentifier}...on GiftCardPaymentMethod{__typename}...on AnyRedeemablePaymentMethod{__typename availableRedemptionSources orderingIndex}...on AnyWalletPaymentMethod{availableWalletPaymentConfigs{...on PaypalWalletConfig{__typename name merchantId venmoEnabled payflow paymentIntent paymentMethodIdentifier orderingIndex}...on ShopPayWalletConfig{__typename name storefrontUrl paymentMethodIdentifier orderingIndex}...on ShopifyInstallmentsWalletConfig{__typename name availableLoanTypes maxPrice{amount currencyCode __typename}minPrice{amount currencyCode __typename}supportedCountries supportedCurrencies giftCardsNotAllowed subscriptionItemsNotAllowed ineligibleTestModeCheckout paymentMethodIdentifier orderingIndex}...on FacebookPayWalletConfig{__typename name partnerId partnerMerchantId supportedContainers acquirerCountryCode mode paymentMethodIdentifier orderingIndex}...on ApplePayWalletConfig{__typename name supportedNetworks walletAuthenticationToken walletOrderTypeIdentifier walletServiceUrl paymentMethodIdentifier orderingIndex}...on GooglePayWalletConfig{__typename name allowedAuthMethods allowedCardNetworks gateway gatewayMerchantId merchantId authJwt environment paymentMethodIdentifier orderingIndex}...on AmazonPayClassicWalletConfig{__typename name orderingIndex}__typename}__typename}...on LocalPaymentMethodConfig{__typename paymentMethodIdentifier name displayName additionalParameters{...on IdealBankSelectionParameterConfig{__typename label options{label value __typename}}__typename}orderingIndex}...on AnyPaymentOnDeliveryMethod{__typename additionalDetails paymentInstructions paymentMethodIdentifier orderingIndex displayName}...on PaymentOnDeliveryMethod{__typename additionalDetails paymentInstructions paymentMethodIdentifier}...on CustomPaymentMethod{id name additionalDetails paymentInstructions __typename}...on ManualPaymentMethodConfig{id name additionalDetails paymentInstructions paymentMethodIdentifier orderingIndex __typename}...on CustomPaymentMethodConfig{id name additionalDetails paymentInstructions paymentMethodIdentifier orderingIndex __typename}...on DeferredPaymentMethod{paymentTermsTemplate{id translatedName dueDate __typename}orderingIndex displayName __typename}...on NoopPaymentMethod{__typename}...on GiftCardPaymentMethod{__typename}__typename}__typename}paymentLines{...PaymentLines __typename}billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}paymentFlexibilityPaymentTermsTemplate{id translatedName dueDate dueInDays __typename}__typename}...on PendingTerms{pollDelay __typename}...on UnavailableTerms{__typename}__typename}merchandise{...on FilledMerchandiseTerms{taxesIncluded merchandiseLines{stableId merchandise{...SourceProvidedMerchandise...ProductVariantMerchandiseDetails...ContextualizedProductVariantMerchandiseDetails...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}recurringTotal{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}lineAllocations:lineComponents{...LineAllocationDetails __typename}__typename}__typename}__typename}note{customAttributes{key value __typename}message __typename}scriptFingerprint{signature signatureUuid lineItemScriptChanges paymentScriptChanges shippingScriptChanges __typename}buyerIdentity{...on FilledBuyerIdentityTerms{buyerIdentity{...on GuestProfile{presentmentCurrency countryCode __typename}...on CustomerProfile{id presentmentCurrency fullName firstName lastName countryCode email imageUrl acceptsMarketing phone billingAddresses{address{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}__typename}shippingAddresses{address{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}__typename}__typename}...on BusinessCustomerProfile{checkoutExperienceConfiguration{availablePaymentOptions checkoutCompletionTarget __typename}id presentmentCurrency fullName firstName lastName acceptsMarketing companyName countryCode email phone selectedCompanyLocation{id name __typename}billingAddress{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}shippingAddress{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}__typename}__typename}contactInfoV2{...on EmailFormContents{email __typename}...on SMSFormContents{phoneNumber __typename}__typename}marketingConsent{...on SMSMarketingConsent{value __typename}...on EmailMarketingConsent{value __typename}__typename}shopPayOptInPhone __typename}__typename}recurringTotals{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}subtotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}runningTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalTaxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}deferredTotal{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}subtotalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}taxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}dueAt __typename}hasOnlyDeferredShipping subtotalBeforeReductions{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}duty{...on FilledDutyTerms{totalDutyAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalTaxAndDutyAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}...on PendingTerms{pollDelay __typename}...on UnavailableTerms{__typename}__typename}tax{...on FilledTaxTerms{totalTaxAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalTaxAndDutyAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalAmountIncludedInTarget{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}exemptions{taxExemptionReason targets{...on TargetAllLines{__typename}__typename}__typename}__typename}...on PendingTerms{pollDelay __typename}...on UnavailableTerms{__typename}__typename}tip{...on FilledTipTerms{tipLines{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}tipSuggestions{...on TipSuggestion{__typename percentage amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}}__typename}__typename}__typename}localizationExtension{...on LocalizationExtension{fields{...on LocalizationExtensionField{key title value __typename}__typename}__typename}__typename}landedCostDetails{incotermInformation{incoterm reason __typename}__typename}nonNegotiableTerms{signature contents{signature targetTerms targetLine{allLines index __typename}attributes __typename}__typename}optionalDuties{buyerRefusesDuties refuseDutiesPermitted __typename}attribution{attributions{...on AttributionItem{...on RetailAttributions{deviceId locationId userId __typename}__typename}__typename}__typename}captcha{...on Captcha{provider challenge sitekey token __typename}...on PendingTerms{taskId pollDelay __typename}__typename}__typename}fragment PaymentLines on PaymentLine{specialInstructions amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}dueAt paymentMethod{...on DirectPaymentMethod{sessionId paymentMethodIdentifier __typename}...on GiftCardPaymentMethod{code balance{amount currencyCode __typename}__typename}...on RedeemablePaymentMethod{redemptionSource redemptionContent{...on ShopCashRedemptionContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}__typename}redemptionId destinationAmount{amount currencyCode __typename}sourceAmount{amount currencyCode __typename}__typename}__typename}__typename}...on WalletPaymentMethod{name walletContent{...on ShopPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}sessionToken paymentMethodIdentifier __typename}...on PaypalWalletContent{paypalBillingAddress:billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}email payerId token paymentMethodIdentifier acceptedSubscriptionTerms __typename}...on ApplePayWalletContent{data signature version lastDigits paymentMethodIdentifier __typename}...on GooglePayWalletContent{signature signedMessage protocolVersion paymentMethodIdentifier __typename}...on FacebookPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}containerData containerId mode paymentMethodIdentifier __typename}...on ShopifyInstallmentsWalletContent{autoPayEnabled billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}disclosureDetails{evidence id type __typename}installmentsToken sessionToken paymentMethodIdentifier __typename}__typename}__typename}...on LocalPaymentMethod{paymentMethodIdentifier name additionalParameters{...on IdealPaymentMethodParameters{bank __typename}__typename}__typename}...on PaymentOnDeliveryMethod{additionalDetails paymentInstructions paymentMethodIdentifier __typename}...on OffsitePaymentMethod{paymentMethodIdentifier name __typename}...on CustomPaymentMethod{id name additionalDetails paymentInstructions paymentMethodIdentifier __typename}...on ManualPaymentMethod{id name paymentMethodIdentifier __typename}...on DeferredPaymentMethod{paymentTermsTemplate{id translatedName dueDate __typename}orderingIndex displayName __typename}...on NoopPaymentMethod{__typename}__typename}__typename}fragment PresentmentMerchandiseTerms on Presentment{merchandise{lines{allocations{...on PresentmentDiscountLineAllocation{amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}__typename}__typename}availability components{properties{...MerchandiseProperties __typename}merchandise{...PresentmentMerchandiseFragment __typename}quantity requestedQuantity availability stableId totalAmountAfterReductions{amount currencyCode __typename}totalAmountBeforeReductions{amount currencyCode __typename}__typename}merchandise{...PresentmentMerchandiseFragment __typename}properties{...MerchandiseProperties __typename}quantity requestedQuantity stableId totalAmountAfterReductions{amount currencyCode __typename}totalAmountBeforeReductions{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}checkoutPriceAfterReductions{amount currencyCode __typename}recurringTotal{title fixedPrice{amount currencyCode __typename}fixedPriceCount interval intervalCount recurringPrice{amount currencyCode __typename}__typename}unitPrice{price{amount currencyCode __typename}measurement{referenceUnit referenceValue __typename}__typename}__typename}__typename}__typename}fragment PresentmentMerchandiseFragment on PresentmentMerchandise{variantId digest price{amount currencyCode __typename}title subtitle image{altText one:transformedSrc(maxWidth:64,maxHeight:64)two:transformedSrc(maxWidth:128,maxHeight:128)four:transformedSrc(maxWidth:256,maxHeight:256)__typename}deferredAmount{amount currencyCode __typename}giftCard options{name value __typename}sellingPlan{name id digest deliveriesPerBillingCycle prepaid subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}requiresShipping product{id vendor productType __typename}__typename}"}'),m=n("0/IZ");let p;function y(e){switch(e.state.read(e.parts.postPurchaseInquiryStatus).value){case"success":case"done":return p.Success;case"declined":return p.Declined;case"error":return p.Error;case"timeout":return p.Timeout;case"disabled":case"failed":default:return}}!function(e){e.Declined="DECLINED",e.Error="ERROR",e.Success="SUCCESS",e.Timeout="TIMEOUT"}(p||(p={}));var _=n("Kd+2"),u=n("yOSb"),c=n("YfDh"),h=n("1ZlW"),g=n("4pLd"),C=n("EWRc"),v=n("huoK"),P=n("krPf"),b=n("ffJB"),f=n("oD2i"),I=n("ds8S"),M=n("B+mQ"),A=n("y4fb"),T=n("c2b9"),D=n("lyH5");class S extends Error{constructor(){super(...arguments),this.name="MissingSessionTokenError"}}const x={any:!0};function k(e){var t,n,a,i,r,s,d,l,m,p,y,k;let{isCompleting:N=!1,customizeNegotiation:V}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.sessionToken)throw new S("No session token");const{state:O,parts:F}=e,L=O.read(F.email).value.trim(),R=O.read(F.phone).value.trim(),B=O.read(F.acceptMarketing).value,w=O.read(F.acceptSmsMarketing).value,E=O.read(F.smsMarketingPhone).value,z=O.read(e.parts.merchandiseLines).value,j=z.some(e=>{let{requiresShipping:t}=e;return t}),U=O.read(e.parts.shopPayArtifact).value,q=O.read(e.parts.optionalDuties).value,W=O.read(e.parts.captcha).value,$=e.state.read(e.current).value,H=$.shippingAddress,G=O.read(F.sameAsShipping).value,Y=O.read(F.shippingAddress).value,J=O.read(F.billingAddress).value,Q=!H||!Object(M.a)(Y,H),X=O.read(F.sameAsLocationBilling).value,K=O.read(F.paymentLines).value,Z=O.read(F.attribution).value,ee=null==K?void 0:K.some(e=>"wallet"===e.method.type&&e.method.name===f.a.PaypalExpress),te=null==K?void 0:K.some(e=>"wallet"===e.method.type&&[f.a.GooglePay,f.a.FacebookPay,f.a.ApplePay].includes(e.method.name));let ne;ne=X&&"BusinessCustomerProfile"===(null==(t=$.buyerIdentity)||null==(n=t.customerProfile)?void 0:n.__typename)&&$.buyerIdentity.customerProfile.billingAddress?$.buyerIdentity.customerProfile.billingAddress:ee?j?Y:J:te?J:j&&G?Y:J;const ae=Object(o.d)()||null,oe="loading"===e.throttle.current.status?null:null!=(a=e.throttle.current.token)?a:null,{proposedTotalAmount:ie,proposedTotalIncludedAmount:re,proposedMixedStateTotalAmount:se,proposedExemptions:de}=Object(P.a)($.taxes,$.duties,$.taxExemptions),le=$.scriptFingerprint,me=O.read(F.localizationExtensions).value.map(e=>{const{key:t,value:n}=O.read(e).value;return{key:t,value:n||""}}),pe={},ye=[];if(R&&(pe.emailOrSms={value:null!=R?R:""}),w&&ye.push({sms:{value:null!=E?E:""}}),L){var _e;const e=null==(_e=$.contactInfo)?void 0:_e.email,t=!e||e!==L;pe.emailOrSms={value:null!=L?L:"",emailOrSmsChanged:t},B&&ye.push({email:{value:L}})}const ue=null==(i=$.merchandiseLines)?void 0:i.lines.some(e=>e.sellingPlan),ce=null==(r=$.merchandiseLines)?void 0:r.lines.some(e=>{var t;return null==(t=e.sellingPlan)?void 0:t.isFixed}),he=(null==(s=$.nonNegotiableTerms)||null==(d=s.contents)?void 0:d.some(e=>e.targetTerms===I.a.Discount))||!1,ge={checkpointData:ae,sessionInput:{sessionToken:e.sessionToken},queueToken:oe,discounts:{lines:Object(c.c)({lines:O.read(F.discountLines).value},$.merchandiseLines,O.read(F.merchandiseLines).value),acceptUnexpectedDiscounts:!he},delivery:{deliveryLines:Object(u.c)({source:e,shippingAddress:Y,proposedDeliveryLines:O.read(F.deliveryLines).value,destinationChanged:Q,isSubmitForCompletion:N,isPointOfSale:Object(D.a)({customAttributes:$.customAttributes}),negotiatedDelivery:$.deliveryNext,negotiatedMerchandiseLines:$.merchandiseLines,proposedMerchandiseLines:O.read(F.merchandiseLines).value,locationAddress:O.read(F.locationAddress).value,retailLocationId:Object(D.b)({customAttributes:$.customAttributes}),partialAllowed:e.context.allowPartialStreetAddress}),noDeliveryRequired:[],useProgressiveRates:O.read(F.useProgressiveRates).value,usePrefetchShippingRates:!1,interfaceFlow:O.read(F.interfaceFlow).value},merchandise:Object(h.f)({lines:z}),payment:{totalAmount:x,paymentLines:Object(v.c)($.paymentDue,$.deferredTotal,$.checkoutTotal,{lines:K},Object(_.a)(ne),N,ue,ce,null==(l=$.paymentFlexibilityPaymentTermsTemplate)?void 0:l.id),billingAddress:{streetAddress:Object(_.a)(ne)},paymentFlexibilityTermsId:null==(m=$.paymentFlexibilityPaymentTermsTemplate)?void 0:m.id},buyerIdentity:{buyerIdentity:{presentmentCurrency:null==(p=$.buyerIdentity)?void 0:p.presentmentCurrency,countryCode:null==(y=$.buyerIdentity)?void 0:y.countryCode},contactInfoV2:L||R?pe:null,marketingConsent:ye,shopPayOptInPhone:{number:Y.phone||J.phone,countryCode:(null==Y?void 0:Y.countryCode)||(null==J?void 0:J.countryCode)||(null==(k=$.buyerIdentity)?void 0:k.countryCode)}},tip:{tipLines:Object(b.a)({lines:O.read(F.tipLines).value})},taxes:{proposedAllocations:null,proposedTotalAmount:ie,proposedTotalIncludedAmount:re,proposedMixedStateTotalAmount:se,proposedExemptions:de},note:Object(C.b)(O.read(F.note).value,O.read(F.attributes).value),localizationExtension:{fields:me},shopPayArtifact:U,nonNegotiableTerms:$.nonNegotiableTerms?Object(g.a)($.nonNegotiableTerms):null,scriptFingerprint:le,optionalDuties:q?Object(A.a)(q.buyerRefusesDuties):null,attribution:Z,captcha:Object(T.a)(W)};return V?V(ge):ge}var N=n("VgMU"),V=n("lx7V"),O=n("Qtti"),F=n("hN6j"),L=n("6PO5"),R=n("dCrD"),B=n("hjjb"),w=n("0UtQ"),E=n("XFqB"),z=n("rHRR"),j=n("1X+6");class U extends Error{constructor(){super(...arguments),this.name="MissingSourceError"}}function q(e){var t,n,a,o,i,r,s,d,l;let{sellerProposal:m,buyerProposal:p={__typename:"Proposal",merchandise:{__typename:"UnavailableTerms"},merchandiseDiscount:{__typename:"FilledDiscountTerms",lines:[]},deliveryDiscount:{__typename:"FilledDiscountTerms",lines:[]},delivery:{__typename:"UnavailableTerms"},subtotalBeforeTaxesAndShipping:{__typename:"AnyConstraint"},runningTotal:{__typename:"AnyConstraint"},total:{__typename:"AnyConstraint"},hasOnlyDeferredShipping:!1,attribution:{__typename:"Attribution",attributions:[]}},presentment:y,violations:g=[],silenceViolations:C}=e;const f=Object(z.a)(g,C),I=m;if(!I)throw new U("There is no receipt or sellerProposal");const M="UnavailableTerms"===I.buyerIdentity.__typename,S=Object(V.c)(I.buyerIdentity),x=null==p?void 0:p.subtotalBeforeTaxesAndShipping,k="Proposal"===I.__typename?Object(B.f)(I.subtotalBeforeTaxesAndShipping,x,f,I.merchandise):void 0,N=null==p?void 0:p.runningTotal,q="Proposal"===I.__typename?Object(B.e)(I.runningTotal,N,f,I.merchandise):void 0,W="Proposal"===I.__typename?Object(B.d)(null!=(t=I.deferredTotal)?t:void 0):void 0,{checkoutTotal:$,checkoutTotalBeforeTaxesAndShipping:H,checkoutTotalTaxes:G}=p,Y="Proposal"===I.__typename?Object(B.b)(null!=(n=I.checkoutTotal)?n:void 0,null!=$?$:void 0,f,I.merchandise):void 0,J="Proposal"===I.__typename?Object(B.b)(null!=(a=I.checkoutTotalBeforeTaxesAndShipping)?a:void 0,null!=H?H:void 0,f,I.merchandise):void 0,Q="Proposal"===I.__typename?Object(B.b)(null!=(o=I.checkoutTotalTaxes)?o:void 0,null!=G?G:void 0,f,I.merchandise):void 0,X=I.total&&"AnyConstraint"!==I.total.__typename?Object(O.b)(I.total):void 0,K=Object(R.b)(I.recurringTotals),Z=I.subtotalBeforeReductions&&"AnyConstraint"!==I.subtotalBeforeReductions.__typename?Object(O.b)(I.subtotalBeforeReductions):void 0,ee="PendingTerms"===I.delivery.__typename,te=Object(h.g)(I.merchandise,null==p?void 0:p.merchandise,f),ne=Object(v.a)(I.payment,q),ae=Object(v.e)(I.payment,q,ne,W,Y,te.lines.some(e=>e.sellingPlan)),oe=M?void 0:Object(V.d)(m),ie=Object(D.a)(I.note),re=Object(u.d)({delivery:I.delivery,negotiatedMerchandise:I.merchandise,violations:f,isPointOfSale:ie}),se=Object(D.c)(I.attribution),de=Object(b.c)(I.tip),le=Object(b.b)(I.tip),me=null==(i=I.localizationExtension)?void 0:i.fields,pe=I.scriptFingerprint?Object(L.a)(I.scriptFingerprint):void 0;return{billingAddress:void 0,...ee?void 0:{deliveryNext:re},shippingAddress:Object(_.g)(I.delivery),merchandiseLines:te,paymentMethods:Object(v.f)(I.payment),paymentLines:ae,paymentDue:ne,...oe?{contactInfo:oe}:void 0,duties:Object(F.a)(I.duty),optionalDuties:I.optionalDuties?Object(A.b)(I.optionalDuties):void 0,landedCostDetails:null!=(r=null==(s=I.landedCostDetails)?void 0:s.incotermInformation)?r:void 0,taxes:Object(P.d)(I.tax),taxExemptions:Object(P.c)(I.tax),discountLines:Object(c.d)({merchandiseDiscount:I.merchandiseDiscount,deliveryDiscount:I.deliveryDiscount}),subtotal:k,runningTotal:q,deferredTotal:W,checkoutTotal:Y,checkoutTotalBeforeTaxesAndShipping:J,checkoutTotalTaxes:Q,total:X,recurringTotals:K,subtotalBeforeReductions:Z,acceptSmsMarketing:null!=(d=Object(V.b)(I.buyerIdentity))&&d,smsMarketingPhone:null!=(l=Object(V.g)(I.buyerIdentity))?l:void 0,hasTerminalViolations:Object(j.o)(f),stockProblemsViolations:Object(w.b)(f),allViolations:g,buyerIdentity:S,tipOptions:de,presentment:Object(E.b)(y),tipLines:le,localizationExtensions:me,scriptFingerprint:pe,attribution:se,captcha:Object(T.b)(I.captcha,f)}}var W=n("XwMR"),$=n("1uhq"),H=n("asF6"),G=n("FR+n"),Y=JSON.parse('{"id":"bb56943ccab3fb2a0ef31673239b9e3b73a15bc1252c19eabf3ecb3034666226","name":"Proposal","source":"query Proposal($delivery:DeliveryTermsInput,$discounts:DiscountTermsInput,$payment:PaymentTermInput,$merchandise:MerchandiseTermInput,$buyerIdentity:BuyerIdentityTermInput,$taxes:TaxTermInput,$sessionInput:SessionTokenInput!,$checkpointData:String,$queueToken:String,$reduction:ReductionInput,$changesetTokens:[String!],$tip:TipTermInput,$note:NoteInput,$localizationExtension:LocalizationExtensionInput,$nonNegotiableTerms:NonNegotiableTermsInput,$scriptFingerprint:ScriptFingerprintInput,$optionalDuties:OptionalDutiesInput,$attribution:AttributionInput,$captcha:CaptchaInput){session(sessionInput:$sessionInput){negotiate(input:{purchaseProposal:{delivery:$delivery,discounts:$discounts,payment:$payment,merchandise:$merchandise,buyerIdentity:$buyerIdentity,taxes:$taxes,reduction:$reduction,tip:$tip,note:$note,nonNegotiableTerms:$nonNegotiableTerms,localizationExtension:$localizationExtension,scriptFingerprint:$scriptFingerprint,optionalDuties:$optionalDuties,attribution:$attribution,captcha:$captcha},checkpointData:$checkpointData,queueToken:$queueToken,changesetTokens:$changesetTokens}){__typename result{...on NegotiationResultAvailable{queueToken buyerProposal{...BuyerProposalDetails __typename}sellerProposal{...ProposalDetails __typename}presentment{...PresentmentMerchandiseTerms __typename}__typename}...on CheckpointDenied{redirectUrl __typename}...on Throttled{pollAfter queueToken pollUrl __typename}...on SubmittedForCompletion{receipt{...ReceiptDetails __typename}__typename}__typename}errors{code localizedMessage nonLocalizedMessage localizedMessageHtml...on RemoveTermViolation{target __typename}...on AcceptNewTermViolation{target __typename}...on ConfirmChangeViolation{from to __typename}...on UnprocessableTermViolation{target __typename}...on UnresolvableTermViolation{target __typename}__typename}}__typename}}fragment BuyerProposalDetails on Proposal{merchandiseDiscount{...ProposalDiscountFragment __typename}deliveryDiscount{...ProposalDiscountFragment __typename}delivery{...ProposalDeliveryFragment __typename}merchandise{...on FilledMerchandiseTerms{taxesIncluded merchandiseLines{stableId merchandise{...SourceProvidedMerchandise...ProductVariantMerchandiseDetails...ContextualizedProductVariantMerchandiseDetails...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}recurringTotal{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}lineAllocations:lineComponents{...LineAllocationDetails __typename}__typename}__typename}__typename}runningTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalTaxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}deferredTotal{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}subtotalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}taxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}dueAt __typename}hasOnlyDeferredShipping subtotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}attribution{attributions{...on AttributionItem{...on RetailAttributions{deviceId locationId userId __typename}__typename}__typename}__typename}__typename}fragment ProposalDiscountFragment on DiscountTermsV2{__typename...on FilledDiscountTerms{lines{...DiscountLineDetailsFragment __typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}}fragment DiscountLineDetailsFragment on DiscountLine{allocations{...on DiscountAllocatedAllocationSet{__typename allocations{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}target{index targetType __typename}__typename}}__typename}discount{...DiscountDetailsFragment __typename}lineAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}fragment DiscountDetailsFragment on Discount{...on CustomDiscount{title presentationLevel signature signatureUuid type value{...on PercentageValue{percentage __typename}...on FixedAmountValue{appliesOnEachItem fixedAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}...on CodeDiscount{title code presentationLevel __typename}...on DiscountCodeTrigger{code __typename}...on AutomaticDiscount{presentationLevel title __typename}__typename}fragment ProposalDeliveryFragment on DeliveryTerms{__typename...on FilledDeliveryTerms{intermediateRates progressiveRatesEstimatedTimeUntilCompletion shippingRatesStatusToken deliveryLines{destinationAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on Geolocation{country{code __typename}zone{code __typename}coordinates{latitude longitude __typename}__typename}...on PartialStreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}__typename}targetMerchandise{...on FilledMerchandiseLineTargetCollection{lines{stableId merchandise{...SourceProvidedMerchandise...on ProductVariantMerchandise{id digest variantId title requiresShipping properties{...MerchandiseProperties __typename}__typename}...on ContextualizedProductVariantMerchandise{id digest variantId title requiresShipping sellingPlan{id digest name prepaid deliveriesPerBillingCycle subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}properties{...MerchandiseProperties __typename}__typename}...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}groupType selectedDeliveryStrategy{...on CompleteDeliveryStrategy{handle __typename}...on DeliveryStrategyReference{handle __typename}__typename}availableDeliveryStrategies{...on CompleteDeliveryStrategy{title handle custom description acceptsInstructions phoneRequired methodType carrierName brandedPromise{logoUrl name __typename}deliveryStrategyBreakdown{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}discountRecurringCycleLimit excludeFromDeliveryOptionPrice targetMerchandise{...on FilledMerchandiseLineTargetCollection{lines{stableId merchandise{...SourceProvidedMerchandise...on ProductVariantMerchandise{id digest variantId title requiresShipping properties{...MerchandiseProperties __typename}__typename}...on ContextualizedProductVariantMerchandise{id digest variantId title requiresShipping sellingPlan{id digest name prepaid deliveriesPerBillingCycle subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}properties{...MerchandiseProperties __typename}__typename}...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}__typename}minDeliveryDateTime maxDeliveryDateTime deliveryPromisePresentmentTitle{short long __typename}trustScores{deliveryPerformanceScore __typename}estimatedTimeInTransit{...on IntIntervalConstraint{lowerBound upperBound __typename}...on IntValueConstraint{value __typename}__typename}amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}amountAfterDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}pickupLocation{...on PickupInStoreLocation{address{address1 address2 city countryCode phone postalCode zoneCode __typename}instructions name __typename}...on PickupPointLocation{address{address1 address2 address3 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}__typename}businessHours{day openingTime closingTime __typename}carrierCode carrierName handle kind name __typename}__typename}__typename}__typename}__typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}}fragment SourceProvidedMerchandise on Merchandise{...on SourceProvidedMerchandise{__typename product{id title productType vendor __typename}digest variantId optionalIdentifier title subtitle taxable giftCard requiresShipping price{amount currencyCode __typename}deferredAmount{amount currencyCode __typename}image{altText one:transformedSrc(maxWidth:64,maxHeight:64)two:transformedSrc(maxWidth:128,maxHeight:128)four:transformedSrc(maxWidth:256,maxHeight:256)__typename}options{name value __typename}properties{...MerchandiseProperties __typename}taxCode taxesIncluded weight{value unit __typename}sku}__typename}fragment MerchandiseProperties on MerchandiseProperty{name value{...on MerchandisePropertyValueString{string:value __typename}...on MerchandisePropertyValueInt{int:value __typename}...on MerchandisePropertyValueFloat{float:value __typename}...on MerchandisePropertyValueBoolean{boolean:value __typename}...on MerchandisePropertyValueJson{json:value __typename}__typename}visible __typename}fragment ProductVariantMerchandiseDetails on ProductVariantMerchandise{id digest variantId title subtitle product{id vendor productType __typename}image{altText one:transformedSrc(maxWidth:64,maxHeight:64)two:transformedSrc(maxWidth:128,maxHeight:128)four:transformedSrc(maxWidth:256,maxHeight:256)__typename}properties{...MerchandiseProperties __typename}requiresShipping options{name value __typename}sellingPlan{id subscriptionDetails{billingInterval __typename}__typename}giftCard __typename}fragment ContextualizedProductVariantMerchandiseDetails on ContextualizedProductVariantMerchandise{id digest variantId title subtitle sku price{amount currencyCode __typename}product{id vendor productType __typename}image{altText one:transformedSrc(maxWidth:64,maxHeight:64)two:transformedSrc(maxWidth:128,maxHeight:128)four:transformedSrc(maxWidth:256,maxHeight:256)__typename}properties{...MerchandiseProperties __typename}requiresShipping options{name value __typename}sellingPlan{name id digest deliveriesPerBillingCycle prepaid subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}giftCard deferredAmount{amount currencyCode __typename}__typename}fragment LineAllocationDetails on LineComponent{stableId quantity totalAmountBeforeReductions{amount currencyCode __typename}totalAmountAfterDiscounts{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}checkoutPriceAfterDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}unitPrice{price{amount currencyCode __typename}measurement{referenceUnit referenceValue __typename}__typename}allocations{...on LineComponentDiscountAllocation{discountLine{...DiscountLineDetailsFragment __typename}allocation{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}amount{amount currencyCode __typename}__typename}__typename}__typename}fragment ProposalDetails on Proposal{merchandiseDiscount{...ProposalDiscountFragment __typename}deliveryDiscount{...ProposalDiscountFragment __typename}delivery{...on FilledDeliveryTerms{intermediateRates progressiveRatesEstimatedTimeUntilCompletion shippingRatesStatusToken deliveryLines{destinationAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on Geolocation{country{code __typename}zone{code __typename}coordinates{latitude longitude __typename}__typename}...on PartialStreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}__typename}targetMerchandise{...on FilledMerchandiseLineTargetCollection{lines{stableId merchandise{...SourceProvidedMerchandise...on ProductVariantMerchandise{id digest variantId title requiresShipping properties{...MerchandiseProperties __typename}__typename}...on ContextualizedProductVariantMerchandise{id digest variantId title requiresShipping sellingPlan{id digest name prepaid deliveriesPerBillingCycle subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}properties{...MerchandiseProperties __typename}__typename}...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}groupType selectedDeliveryStrategy{...on CompleteDeliveryStrategy{handle __typename}__typename}availableDeliveryStrategies{...on CompleteDeliveryStrategy{originLocation{id __typename}title handle custom description acceptsInstructions phoneRequired methodType carrierName brandedPromise{logoUrl name __typename}deliveryStrategyBreakdown{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}discountRecurringCycleLimit excludeFromDeliveryOptionPrice targetMerchandise{...on FilledMerchandiseLineTargetCollection{lines{stableId merchandise{...SourceProvidedMerchandise...on ProductVariantMerchandise{id digest variantId title requiresShipping properties{...MerchandiseProperties __typename}__typename}...on ContextualizedProductVariantMerchandise{id digest variantId title subtitle requiresShipping sellingPlan{id digest name prepaid deliveriesPerBillingCycle subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}properties{...MerchandiseProperties __typename}__typename}...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}__typename}__typename}__typename}minDeliveryDateTime maxDeliveryDateTime deliveryPromisePresentmentTitle{short long __typename}trustScores{deliveryPerformanceScore __typename}estimatedTimeInTransit{...on IntIntervalConstraint{lowerBound upperBound __typename}...on IntValueConstraint{value __typename}__typename}amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}amountAfterDiscounts{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}pickupLocation{...on PickupInStoreLocation{address{address1 address2 city countryCode phone postalCode zoneCode __typename}instructions name distanceFromBuyer{unit value __typename}__typename}...on PickupPointLocation{address{address1 address2 address3 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}__typename}businessHours{day openingTime closingTime __typename}carrierCode carrierName handle kind name __typename}__typename}__typename}__typename}__typename}__typename}...on PendingTerms{pollDelay taskId __typename}...on UnavailableTerms{__typename}__typename}payment{...on FilledPaymentTerms{availablePayments{paymentMethod{...on AnyDirectPaymentMethod{__typename availablePaymentProviders{paymentMethodIdentifier name brands orderingIndex displayName __typename}}...on AnyOffsitePaymentMethod{__typename availableOffsiteProviders{__typename paymentMethodIdentifier name paymentBrands orderingIndex}}...on DirectPaymentMethod{__typename paymentMethodIdentifier}...on GiftCardPaymentMethod{__typename}...on AnyRedeemablePaymentMethod{__typename availableRedemptionSources orderingIndex}...on AnyWalletPaymentMethod{availableWalletPaymentConfigs{...on PaypalWalletConfig{__typename name merchantId venmoEnabled payflow paymentIntent paymentMethodIdentifier orderingIndex}...on ShopPayWalletConfig{__typename name storefrontUrl paymentMethodIdentifier orderingIndex}...on ShopifyInstallmentsWalletConfig{__typename name availableLoanTypes maxPrice{amount currencyCode __typename}minPrice{amount currencyCode __typename}supportedCountries supportedCurrencies giftCardsNotAllowed subscriptionItemsNotAllowed ineligibleTestModeCheckout paymentMethodIdentifier orderingIndex}...on FacebookPayWalletConfig{__typename name partnerId partnerMerchantId supportedContainers acquirerCountryCode mode paymentMethodIdentifier orderingIndex}...on ApplePayWalletConfig{__typename name supportedNetworks walletAuthenticationToken walletOrderTypeIdentifier walletServiceUrl paymentMethodIdentifier orderingIndex}...on GooglePayWalletConfig{__typename name allowedAuthMethods allowedCardNetworks gateway gatewayMerchantId merchantId authJwt environment paymentMethodIdentifier orderingIndex}...on AmazonPayClassicWalletConfig{__typename name orderingIndex}__typename}__typename}...on LocalPaymentMethodConfig{__typename paymentMethodIdentifier name displayName additionalParameters{...on IdealBankSelectionParameterConfig{__typename label options{label value __typename}}__typename}orderingIndex}...on AnyPaymentOnDeliveryMethod{__typename additionalDetails paymentInstructions paymentMethodIdentifier orderingIndex displayName}...on PaymentOnDeliveryMethod{__typename additionalDetails paymentInstructions paymentMethodIdentifier}...on CustomPaymentMethod{id name additionalDetails paymentInstructions __typename}...on ManualPaymentMethodConfig{id name additionalDetails paymentInstructions paymentMethodIdentifier orderingIndex __typename}...on CustomPaymentMethodConfig{id name additionalDetails paymentInstructions paymentMethodIdentifier orderingIndex __typename}...on DeferredPaymentMethod{paymentTermsTemplate{id translatedName dueDate __typename}orderingIndex displayName __typename}...on NoopPaymentMethod{__typename}...on GiftCardPaymentMethod{__typename}__typename}__typename}paymentLines{...PaymentLines __typename}billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}paymentFlexibilityPaymentTermsTemplate{id translatedName dueDate dueInDays __typename}__typename}...on PendingTerms{pollDelay __typename}...on UnavailableTerms{__typename}__typename}merchandise{...on FilledMerchandiseTerms{taxesIncluded merchandiseLines{stableId merchandise{...SourceProvidedMerchandise...ProductVariantMerchandiseDetails...ContextualizedProductVariantMerchandiseDetails...on MissingProductVariantMerchandise{id digest variantId __typename}__typename}quantity{...on ProposalMerchandiseQuantityByItem{items{...on IntValueConstraint{value __typename}__typename}__typename}__typename}totalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}recurringTotal{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}lineAllocations:lineComponents{...LineAllocationDetails __typename}__typename}__typename}__typename}note{customAttributes{key value __typename}message __typename}scriptFingerprint{signature signatureUuid lineItemScriptChanges paymentScriptChanges shippingScriptChanges __typename}buyerIdentity{...on FilledBuyerIdentityTerms{buyerIdentity{...on GuestProfile{presentmentCurrency countryCode __typename}...on CustomerProfile{id presentmentCurrency fullName firstName lastName countryCode email imageUrl acceptsMarketing phone billingAddresses{address{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}__typename}shippingAddresses{address{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}__typename}__typename}...on BusinessCustomerProfile{checkoutExperienceConfiguration{availablePaymentOptions checkoutCompletionTarget __typename}id presentmentCurrency fullName firstName lastName acceptsMarketing companyName countryCode email phone selectedCompanyLocation{id name __typename}billingAddress{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}shippingAddress{firstName lastName address1 address2 phone postalCode city company zoneCode countryCode label __typename}__typename}__typename}contactInfoV2{...on EmailFormContents{email __typename}...on SMSFormContents{phoneNumber __typename}__typename}marketingConsent{...on SMSMarketingConsent{value __typename}...on EmailMarketingConsent{value __typename}__typename}shopPayOptInPhone __typename}__typename}recurringTotals{title interval intervalCount recurringPrice{amount currencyCode __typename}fixedPrice{amount currencyCode __typename}fixedPriceCount __typename}subtotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}runningTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}total{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalBeforeTaxesAndShipping{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotalTaxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}checkoutTotal{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}deferredTotal{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}subtotalAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}taxes{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}dueAt __typename}hasOnlyDeferredShipping subtotalBeforeReductions{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}duty{...on FilledDutyTerms{totalDutyAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalTaxAndDutyAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}...on PendingTerms{pollDelay __typename}...on UnavailableTerms{__typename}__typename}tax{...on FilledTaxTerms{totalTaxAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalTaxAndDutyAmount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}totalAmountIncludedInTarget{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}exemptions{taxExemptionReason targets{...on TargetAllLines{__typename}__typename}__typename}__typename}...on PendingTerms{pollDelay __typename}...on UnavailableTerms{__typename}__typename}tip{...on FilledTipTerms{tipLines{amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}__typename}tipSuggestions{...on TipSuggestion{__typename percentage amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}}__typename}__typename}__typename}localizationExtension{...on LocalizationExtension{fields{...on LocalizationExtensionField{key title value __typename}__typename}__typename}__typename}landedCostDetails{incotermInformation{incoterm reason __typename}__typename}nonNegotiableTerms{signature contents{signature targetTerms targetLine{allLines index __typename}attributes __typename}__typename}optionalDuties{buyerRefusesDuties refuseDutiesPermitted __typename}attribution{attributions{...on AttributionItem{...on RetailAttributions{deviceId locationId userId __typename}__typename}__typename}__typename}captcha{...on Captcha{provider challenge sitekey token __typename}...on PendingTerms{taskId pollDelay __typename}__typename}__typename}fragment PaymentLines on PaymentLine{specialInstructions amount{...on MoneyValueConstraint{value{amount currencyCode __typename}__typename}__typename}dueAt paymentMethod{...on DirectPaymentMethod{sessionId paymentMethodIdentifier __typename}...on GiftCardPaymentMethod{code balance{amount currencyCode __typename}__typename}...on RedeemablePaymentMethod{redemptionSource redemptionContent{...on ShopCashRedemptionContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}__typename}redemptionId destinationAmount{amount currencyCode __typename}sourceAmount{amount currencyCode __typename}__typename}__typename}__typename}...on WalletPaymentMethod{name walletContent{...on ShopPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}sessionToken paymentMethodIdentifier __typename}...on PaypalWalletContent{paypalBillingAddress:billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}email payerId token paymentMethodIdentifier acceptedSubscriptionTerms __typename}...on ApplePayWalletContent{data signature version lastDigits paymentMethodIdentifier __typename}...on GooglePayWalletContent{signature signedMessage protocolVersion paymentMethodIdentifier __typename}...on FacebookPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}containerData containerId mode paymentMethodIdentifier __typename}...on ShopifyInstallmentsWalletContent{autoPayEnabled billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}disclosureDetails{evidence id type __typename}installmentsToken sessionToken paymentMethodIdentifier __typename}__typename}__typename}...on LocalPaymentMethod{paymentMethodIdentifier name additionalParameters{...on IdealPaymentMethodParameters{bank __typename}__typename}__typename}...on PaymentOnDeliveryMethod{additionalDetails paymentInstructions paymentMethodIdentifier __typename}...on OffsitePaymentMethod{paymentMethodIdentifier name __typename}...on CustomPaymentMethod{id name additionalDetails paymentInstructions paymentMethodIdentifier __typename}...on ManualPaymentMethod{id name paymentMethodIdentifier __typename}...on DeferredPaymentMethod{paymentTermsTemplate{id translatedName dueDate __typename}orderingIndex displayName __typename}...on NoopPaymentMethod{__typename}__typename}__typename}fragment PresentmentMerchandiseTerms on Presentment{merchandise{lines{allocations{...on PresentmentDiscountLineAllocation{amount{amount currencyCode __typename}discount{...DiscountDetailsFragment __typename}__typename}__typename}availability components{properties{...MerchandiseProperties __typename}merchandise{...PresentmentMerchandiseFragment __typename}quantity requestedQuantity availability stableId totalAmountAfterReductions{amount currencyCode __typename}totalAmountBeforeReductions{amount currencyCode __typename}__typename}merchandise{...PresentmentMerchandiseFragment __typename}properties{...MerchandiseProperties __typename}quantity requestedQuantity stableId totalAmountAfterReductions{amount currencyCode __typename}totalAmountBeforeReductions{amount currencyCode __typename}totalAmountAfterLineDiscounts{amount currencyCode __typename}checkoutPriceBeforeReductions{amount currencyCode __typename}checkoutPriceAfterReductions{amount currencyCode __typename}recurringTotal{title fixedPrice{amount currencyCode __typename}fixedPriceCount interval intervalCount recurringPrice{amount currencyCode __typename}__typename}unitPrice{price{amount currencyCode __typename}measurement{referenceUnit referenceValue __typename}__typename}__typename}__typename}__typename}fragment PresentmentMerchandiseFragment on PresentmentMerchandise{variantId digest price{amount currencyCode __typename}title subtitle image{altText one:transformedSrc(maxWidth:64,maxHeight:64)two:transformedSrc(maxWidth:128,maxHeight:128)four:transformedSrc(maxWidth:256,maxHeight:256)__typename}deferredAmount{amount currencyCode __typename}giftCard options{name value __typename}sellingPlan{name id digest deliveriesPerBillingCycle prepaid subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}requiresShipping product{id vendor productType __typename}__typename}fragment ReceiptDetails on Receipt{...on ProcessedReceipt{id token classicThankYouPageUrl orderIdentity{buyerIdentifier id __typename}shopPayArtifact{optIn{vaultPhone __typename}__typename}purchaseOrder{...ReceiptPurchaseOrder __typename}orderCreationStatus{__typename}paymentDetails{creditCardLastFourDigits __typename}shopAppLinksAndResources{mobileUrl qrCodeUrl canTrackOrderUpdates shopInstallmentsViewSchedules shopInstallmentsMobileUrl installmentsHighlightEligible mobileUrlAttributionPayload shopAppEligible shopAppQrCodeKillswitch shopPayOrder buyerHasShopApp buyerHasShopPay orderUpdateOptions __typename}postPurchasePageRequested postPurchaseVaultedPaymentMethodStatus __typename}...on ProcessingReceipt{id pollDelay __typename}...on ActionRequiredReceipt{id action{...on CompletePaymentChallenge{offsiteRedirect url __typename}__typename}__typename}...on FailedReceipt{id processingError{...on InventoryClaimFailure{__typename}...on InventoryReservationFailure{__typename}...on OrderCreationFailure{paymentsHaveBeenReverted __typename}...on OrderCreationSchedulingFailure{__typename}...on PaymentFailed{code messageUntranslated __typename}...on DiscountUsageLimitExceededFailure{__typename}...on CustomerPersistenceFailure{__typename}__typename}__typename}__typename}fragment ReceiptPurchaseOrder on PurchaseOrder{__typename totalAmountToPay{amount currencyCode __typename}delivery{...on PurchaseOrderDeliveryTerms{deliveryLines{__typename deliveryStrategy{handle title description methodType pickupLocation{...on PickupInStoreLocation{name address{address1 address2 city countryCode zoneCode postalCode phone coordinates{latitude longitude __typename}__typename}instructions __typename}__typename}__typename}lineAmount{amount currencyCode __typename}destinationAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}__typename}groupType}__typename}__typename}payment{...on PurchaseOrderPaymentTerms{billingAddress{__typename...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}}paymentLines{amount{amount currencyCode __typename}postPaymentMessage dueAt paymentMethod{...on DirectPaymentMethod{sessionId paymentMethodIdentifier creditCard{brand __typename}billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on PurchaseOrderGiftCardPaymentMethod{code __typename}...on WalletPaymentMethod{name walletContent{...on ShopPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}sessionToken paymentMethodIdentifier __typename}...on PaypalWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}email payerId token __typename}...on ApplePayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}data signature version __typename}...on GooglePayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}signature signedMessage protocolVersion __typename}...on FacebookPayWalletContent{billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}containerData containerId mode __typename}...on ShopifyInstallmentsWalletContent{autoPayEnabled billingAddress{...on StreetAddress{firstName lastName company address1 address2 city countryCode zoneCode postalCode phone __typename}...on InvalidBillingAddress{__typename}__typename}disclosureDetails{evidence id type __typename}installmentsToken sessionToken __typename}__typename}__typename}...on LocalPaymentMethod{paymentMethodIdentifier name billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on PaymentOnDeliveryMethod{additionalDetails paymentInstructions paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on OffsitePaymentMethod{paymentMethodIdentifier name billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on ManualPaymentMethod{additionalDetails name paymentInstructions id paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on CustomPaymentMethod{additionalDetails name paymentInstructions id paymentMethodIdentifier billingAddress{...on StreetAddress{name firstName lastName company address1 address2 city countryCode zoneCode postalCode coordinates{latitude longitude __typename}phone __typename}...on InvalidBillingAddress{__typename}__typename}__typename}...on DeferredPaymentMethod{paymentTermsTemplate{id dueDate dueInDays translatedName __typename}orderingIndex displayName __typename}__typename}__typename}__typename}__typename}buyerIdentity{...on PurchaseOrderBuyerIdentityTerms{contactMethod{...on PurchaseOrderEmailContactMethod{email __typename}...on PurchaseOrderSMSContactMethod{phoneNumber __typename}__typename}marketingConsent{...on PurchaseOrderEmailContactMethod{email __typename}...on PurchaseOrderSMSContactMethod{phoneNumber __typename}__typename}__typename}__typename}merchandise{merchandiseLines{merchandise{...ProductVariantSnapshotMerchandiseDetails __typename}__typename}__typename}}fragment ProductVariantSnapshotMerchandiseDetails on ProductVariantSnapshot{variantId options{name value __typename}productTitle title sellingPlan{name id digest deliveriesPerBillingCycle prepaid subscriptionDetails{billingInterval billingIntervalCount billingMaxCycles deliveryInterval deliveryIntervalCount __typename}__typename}__typename}"}');class J extends Error{constructor(){super(...arguments),this.name="StaleNegotiationError"}}class Q extends Error{constructor(){super(...arguments),this.name="NegotiationPollingError"}}class X extends Error{constructor(){super(...arguments),this.name="MissingNegotiationDataError"}}async function K(e,t,n){var a,r,d;const{isActive:l,negotiating:p}=e.start();Object(H.i)({lines:e.state.read(e.parts.merchandiseLines).value})&&e.state.write(e.parts.sameAsShipping,!1);const y=null!=(a=n.include)&&a.includes("billingAddress")&&e.state.read(e.parts.sameAsShipping).value?n.include.filter(e=>"billingAddress"!==e):n.include,_=await e.validate(null!=y?y:[],n.silenceValidations),u=null!=(r=n.negotiationStage)?r:"progression",c=await e.runInterceptors({forceBlock:!_,negotiationStage:u,skipEffects:n.skipStateUpdates});if(!l())return{status:"stale"};if("block"===c.behavior){const e=c.reasons;return t.leaveBreadcrumb("Blocked negotiation",{reasons:e}),{status:"invalid",reasons:e}}const g=k(e,{customizeNegotiation:null==n?void 0:n.customizeNegotiation});let C;n.skipStateUpdates||(C=p());const{graphql:v,throttle:P}=e;let b;const f=null!=(d=n.maximumAttempts)?d:1/0;try{b=await new Promise(async(t,a)=>{let r,d=0;for(;;){var p;if(!l())return void a(new J);const{dirty:c}=e.track(g),b=!c&&0===d&&!n.force,I=ae(g,r),{data:M,error:A}=await v.query(Y,{cache:b,variables:I,getCacheKey(e,t){let{id:n}=e;return`${n}${Object(N.a)(t?Object($.f)(t):{})}`}});if(A)return void a(A);const T=null==M||null==(p=M.session)?void 0:p.negotiate;if(null==T)return void a(new X("negotiation data is missing"));const D=T.result,S=T.errors;if(!l())return void a(new J);if("CheckpointDenied"===D.__typename)return Object(o.e)(D.redirectUrl),void t({status:"denied"});if("Throttled"===D.__typename)return null==C||C({updated:{}}),t({status:"throttled"}),void P.set(Object(m.a)(D));if("SubmittedForCompletion"===D.__typename)return void t({status:"alreadyCompleted",receipt:Object(i.a)(D.receipt,{skipToThankYouPage:!0})});if("NegotiationResultAvailable"===D.__typename){var y,_;e.state.write(e.persistedMerchandiseAtom,Object(G.d)(Object(h.e)(D.buyerProposal.merchandise))),"client"===e.persistNegotiationResultTo&&e.state.write(e.persistedNegotiationAtom,{...D,violations:[]}),P.set(Object(m.a)(D));const o=Object(N.d)(D,S),{fieldsToResolve:i=[]}=n;if(r=T,o.length&&i.find(e=>o.includes(e))&&!n.skipStateUpdates){++d,await Object(s.g)(Object(N.b)(D));continue}const l=D.buyerProposal,p=q({sellerProposal:D.sellerProposal,buyerProposal:l,presentment:D.presentment,violations:S,silenceViolations:n.silenceViolations});let c;null==C||C({updated:p,loadingFields:o,buyerProposal:l});try{c=te(Object(z.a)(S,n.silenceViolations),e.state,e.parts)}catch(u){a(u)}if((Z(S).length||ee(S).length)&&e.track(),t(c?{status:"error",negotiated:e.state.read(e.current).value,violations:S,errors:Object(N.c)(null!=(y=T.errors)?y:[],D.buyerProposal)}:{status:"success",negotiated:e.state.read(e.current).value,violations:S,errors:Object(N.c)(null!=(_=T.errors)?_:[],D.buyerProposal)}),0===o.length)return}if(++d,d>=f)return null==C||C({updated:{...e.state.read(e.current).value}}),void a(new Q("polling limit exceeded"));if(n.skipStateUpdates)break;await Object(s.g)(Object(N.b)(D))}})}catch(I){if(I instanceof J)return{status:"stale"};throw e.track(),I}return b}function Z(e){return e.filter(e=>"UnprocessableTermViolation"===e.__typename&&!j.g.has(e.code))}function ee(e){return e.filter(e=>"ConfirmChangeViolation"===e.__typename&&j.m.has(e.code))}function te(e,t,n){const a=Z(e),o=ee(e);return(0!==a.length||0!==o.length)&&(function(e,t,n){e.some(ne)||e.forEach(e=>{const{code:a,localizedMessage:o,nonLocalizedMessage:i}=e,r=o||i;switch(a){case W.a.PaymentsCreditCardBrandNotSupported:case W.a.PaymentsCreditCardNumberInvalidFormat:case W.a.PaymentsCreditCardNumberInvalid:t.write(n.directPaymentErrors.number,r);break;case W.a.PaymentsCreditCardFirstNameBlank:case W.a.PaymentsCreditCardLastNameBlank:t.write(n.directPaymentErrors.name,r);break;case W.a.PaymentsCreditCardBaseExpired:case W.a.PaymentsCreditCardYearInvalidExpiryYear:case W.a.PaymentsCreditCardMonthInclusion:case W.a.PaymentsCreditCardYearExpired:t.write(n.directPaymentErrors.expiry,r);break;case W.a.PaymentsCreditCardVerificationValueBlank:case W.a.PaymentsCreditCardVerificationValueInvalidForCardType:t.write(n.directPaymentErrors.verificationValue,r);break;case W.a.PaymentsCreditCardGeneric:case W.a.PaymentsCreditCardBaseInvalidStartDateOrIssueNumberForDebit:case W.a.PaymentsCreditCardNameInvalid:case W.a.PaymentsCreditCardSessionId:t.write(n.directPaymentErrors.general,r);break;default:if("$.payment"===e.target){t.write(n.generalPaymentError,r);break}}})}(a,t,n),!0)}function ne(e){return j.a.has(e.code)}function ae(e,t){if(t&&"NegotiationResultAvailable"===t.result.__typename&&Object(P.b)(t.errors)){var n,a;const o=null==(n=t.result.sellerProposal)?void 0:n.tax,i=null==(a=t.result.sellerProposal)?void 0:a.duty,r=Object(P.d)(o),s=Object(F.a)(i),d=Object(P.c)(o),l=Object(P.a)(r,s,d);return{...e,taxes:{...e.taxes,...o?l:{}}}}return e}class oe extends Error{constructor(){super(...arguments),this.name="UnknownCompletionTypeError"}}class ie extends Error{constructor(){super(...arguments),this.name="UnknownMetafieldTypeError"}}function re(e){switch(e.valueType.toUpperCase()){case d.String:return d.String;case d.JsonString:return d.JsonString;case d.Integer:return d.Integer;default:throw new ie("Unexpected metafield valueType: "+e.valueType)}}function se(e){return e.state.read(e.parts.metafields).value.map(e=>({...e,value:String(e.value),valueType:re(e)}))}async function de(e,t){const{negotiating:n,isActive:o}=e.start(),i=await e.validate(),d=await e.runInterceptors({forceBlock:!i,negotiationStage:"completion"});if(!o())return{status:"stale"};if(!e.sourceId||"block"===d.behavior){const e="block"===d.behavior?d.reasons:[a.c.MissingSourceId];return t.leaveBreadcrumb("Blocked completion",{reasons:e}),{status:"invalid",reasons:e}}e.track();const m=n([]),p=Object(r.b)(e.sourceId,e.persistenceManager);return await new Promise(async n=>{for(;;){const{data:a,error:o}=await e.graphql.mutate(l,{variables:{input:k(e,{isCompleting:!0}),attemptToken:p,metafields:se(e),postPurchaseInquiryResult:y(e)}});if(!a)return n({status:"fetch_failed",reason:o?""+o.message:"Submit for completion failed"});const i="SubmitRejected"===a.submitForCompletion.__typename?a.submitForCompletion.violations:void 0,r=Object(N.d)(a.submitForCompletion,i);if("SubmitRejected"===a.submitForCompletion.__typename&&r.length){await Object(s.g)(Object(N.b)(a.submitForCompletion));const n=await e.runInterceptors({negotiationStage:"completion"});if("block"===n.behavior){const e=n.reasons;return t.leaveBreadcrumb("Blocked polled completion",{reasons:e}),{status:"invalid",reasons:e}}continue}const d="SubmitRejected"===(null==a?void 0:a.submitForCompletion.__typename)?null==a?void 0:a.submitForCompletion.violations:[],_="SubmitRejected"===(null==a?void 0:a.submitForCompletion.__typename)?a.submitForCompletion.buyerProposal:void 0,u="SubmitRejected"===(null==a?void 0:a.submitForCompletion.__typename)?q({sellerProposal:a.submitForCompletion.sellerProposal,buyerProposal:_,presentment:a.submitForCompletion.presentment,violations:d}):{};return m({updated:u,buyerProposal:_}),"SubmitRejected"===(null==a?void 0:a.submitForCompletion.__typename)&&d.length>0&&te(d,e.state,e.parts),n(le(a,e,u))}})}function le(e,t,n){let{submitForCompletion:a}=e,{throttle:s,state:d,receipt:l,persistenceManager:p}=t;switch(a.__typename){case"SubmitSuccess":case"SubmitAlreadyAccepted":{const e=Object(i.a)(a.receipt);return"processed"!==e.status&&"failed"!==e.status||Object(r.a)(p),d.write(l,e),{status:"success",receipt:e}}case"SubmittedForCompletion":{const e=Object(i.a)(a.receipt,{skipToThankYouPage:!0});return Object(r.a)(p),{status:"alreadyCompleted",receipt:e}}case"Throttled":return Object(r.a)(p),s.set(Object(m.a)(a)),{status:"throttled"};case"SubmitRejected":return Object(r.a)(p),{status:"rejected",negotiated:n,violations:a.violations,errors:Object(N.c)(a.violations,a.buyerProposal)};case"SubmitFailed":return Object(r.a)(p),{status:"failed",reason:"SubmitFailed"===a.__typename?a.reason:"Submit failed for an unknown reason"};case"CheckpointDenied":return Object(r.a)(p),Object(o.e)(a.redirectUrl),{status:"denied"};default:throw Object(r.a)(p),new oe("Unknown submitForCompletion type: "+a.__typename)}}},JYIk:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("huoK");let o;!function(e){e.DisabledFeature="DISABLED_FEATURE",e.Expired="EXPIRED",e.NotReady="NOT_READY",e.Ready="READY"}(o||(o={}));var i=n("ezGi"),r=n("hywB");class s extends Error{constructor(){super(...arguments),this.name="ReceiptError"}}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pollingTimeoutReached:!1,skipToThankYouPage:!1};switch(e.__typename){case"ProcessingReceipt":return{status:"processing",id:e.id,pollAt:Date.now()+e.pollDelay};case"ProcessedReceipt":{var n,i,r,d,_,h;if(e.postPurchasePageRequested&&e.postPurchaseVaultedPaymentMethodStatus===o.NotReady&&!t.pollingTimeoutReached)return{status:"polling_for_order",id:e.id,token:e.token};const s={amount:parseFloat(e.purchaseOrder.totalAmountToPay.amount),currencyCode:e.purchaseOrder.totalAmountToPay.currencyCode};return{status:"processed",id:e.id,token:e.token,classicThankYouPageUrl:e.classicThankYouPageUrl||null,orderIdentity:{buyerIdentifier:e.orderIdentity.buyerIdentifier,id:e.orderIdentity.id},purchaseOrder:{email:l(e.purchaseOrder.buyerIdentity),phone:m(e.purchaseOrder.buyerIdentity),shippingAddress:p(e.purchaseOrder.delivery),billingAddress:y(e.purchaseOrder.payment),paymentLines:c(e.purchaseOrder.payment).map(t=>{var n,a;return"direct"===t.method.type&&(t.method.creditCardLastFourDigits=null!=(n=null==(a=e.paymentDetails)?void 0:a.creditCardLastFourDigits)?n:void 0),t}),deliveryNext:u(e.purchaseOrder.delivery),paymentDue:Object(a.a)(e.purchaseOrder.payment,s),runningTotal:s,merchandiseLines:f(e.purchaseOrder.merchandise.merchandiseLines)},orderCreationStatus:P(e.orderCreationStatus),postPurchaseVaultingStatus:b(e.postPurchaseVaultedPaymentMethodStatus),postPurchasePageRequested:e.postPurchasePageRequested,shopPayArtifact:{optIn:null!=(n=null==(i=e.shopPayArtifact)?void 0:i.optIn)?n:void 0},shopAppLinksAndResources:{qrCodeUrl:e.shopAppLinksAndResources.qrCodeUrl,mobileUrl:e.shopAppLinksAndResources.mobileUrl,canTrackOrderUpdates:e.shopAppLinksAndResources.canTrackOrderUpdates,shopInstallmentsViewSchedules:e.shopAppLinksAndResources.shopInstallmentsViewSchedules,installmentsHighlightEligible:e.shopAppLinksAndResources.installmentsHighlightEligible,shopInstallmentsMobileUrl:e.shopAppLinksAndResources.shopInstallmentsMobileUrl,mobileUrlAttributionPayload:e.shopAppLinksAndResources.mobileUrlAttributionPayload,shopAppEligible:e.shopAppLinksAndResources.shopAppEligible,shopAppQrCodeKillswitch:e.shopAppLinksAndResources.shopAppQrCodeKillswitch,shopPayOrder:e.shopAppLinksAndResources.shopPayOrder,buyerHasShopApp:null!=(r=null==(d=e.shopAppLinksAndResources)?void 0:d.buyerHasShopApp)?r:void 0,buyerHasShopPay:null!=(_=null==(h=e.shopAppLinksAndResources)?void 0:h.buyerHasShopPay)?_:void 0,orderUpdateOptions:e.shopAppLinksAndResources.orderUpdateOptions},skipToThankYouPage:Boolean(t.skipToThankYouPage)}}case"FailedReceipt":return{status:"failed",id:e.id,failure:C(e.processingError)};case"ActionRequiredReceipt":return{status:"action_required",id:e.id,action:v(e.action)};default:throw new s("Unknown receipt type: "+e.__typename)}}function l(e){const{contactMethod:t}=e;return"PurchaseOrderEmailContactMethod"===t.__typename?t.email:void 0}function m(e){const{contactMethod:t}=e;return"PurchaseOrderSMSContactMethod"===t.__typename?t.phoneNumber:void 0}function p(e){var t;const n=null==(t=e.deliveryLines.find(e=>e.destinationAddress))?void 0:t.destinationAddress,a="StreetAddress"===(null==n?void 0:n.__typename)?n:void 0;return a?Object(r.a)(a):void 0}function y(e){var t,n,a,o;const i="StreetAddress"===(null==(t=e.billingAddress)?void 0:t.__typename)?e.billingAddress:void 0,s=e.paymentLines.find(e=>"WalletPaymentMethod"===e.paymentMethod.__typename);if(s)return function(e,t){var n,a;if("WalletPaymentMethod"===(null==e||null==(n=e.paymentMethod)?void 0:n.__typename)&&""!==(null==e||null==(a=e.paymentMethod)?void 0:a.walletContent.__typename)){var o,i,s;const n=null!=(o=null!=(i=null==e||null==(s=e.paymentMethod)?void 0:s.walletContent.billingAddress)?i:t)?o:void 0;return n?Object(r.a)(n):void 0}}(s,i);const d=null!=(n=null!=(a=null==(o=e.paymentLines.map(e=>e.paymentMethod).filter(e=>"DirectPaymentMethod"===e.__typename||"LocalPaymentMethod"===e.__typename||"OffsitePaymentMethod"===e.__typename||"ManualPaymentMethod"===e.__typename||"CustomPaymentMethod"===e.__typename||"PaymentOnDeliveryMethod"===e.__typename).find(e=>"StreetAddress"===e.billingAddress.__typename))?void 0:o.billingAddress)?a:i)?n:void 0;return d?Object(r.a)(d):void 0}function _(e){if("PickupInStoreLocation"===(null==e?void 0:e.__typename))return{name:e.name,address:Object(r.a)(e.address),instructions:e.instructions,type:null==e?void 0:e.__typename}}function u(e){return{status:"filled",lines:e.deliveryLines.map(e=>function(e){var t;const n={handle:e.deliveryStrategy.handle,title:e.deliveryStrategy.title,description:null!=(t=e.deliveryStrategy.description)?t:void 0,cost:{amount:parseFloat(e.lineAmount.amount),currencyCode:e.lineAmount.currencyCode},costAfterDiscounts:{amount:parseFloat(e.lineAmount.amount),currencyCode:e.lineAmount.currencyCode},estimatedTimeInTransit:void 0,methodType:e.deliveryStrategy.methodType,pickupLocation:_(e.deliveryStrategy.pickupLocation)};return n&&n.methodType!==i.a.None?{status:"available",methods:[n],selectedDeliveryMethodHandle:n.handle,type:e.groupType,targetMerchandiseLines:[]}:{status:"not_required",type:e.groupType,targetMerchandiseLines:[]}}(e))}}function c(e){return e.paymentLines.filter(e=>!e.dueAt).map(e=>{var t;return{...g(e.paymentMethod),cost:h(e.amount),specialInstructions:null!=(t=e.postPaymentMessage)?t:void 0}})}function h(e){if(null!=e)return{amount:parseFloat(e.amount),currencyCode:e.currencyCode}}function g(e){var t,n,a,o,i,r,s,d,l,m,p,y,_;switch(e.__typename){case"DirectPaymentMethod":return{method:{type:"direct",sessionId:e.sessionId,paymentMethodIdentifier:null!=(t=e.paymentMethodIdentifier)?t:"",brand:null!=(n=null==(a=e.creditCard)?void 0:a.brand)?n:void 0}};case"PaymentOnDeliveryMethod":return{method:{type:"paymentOnDelivery",additionalDetails:null!=(o=e.additionalDetails)?o:"",paymentInstructions:null!=(i=e.paymentInstructions)?i:"",paymentMethodIdentifier:null!=(r=e.paymentMethodIdentifier)?r:"",orderingIndex:Number.MAX_SAFE_INTEGER}};case"PurchaseOrderGiftCardPaymentMethod":return{method:{type:"giftCard",code:e.code,orderingIndex:Number.MAX_SAFE_INTEGER}};case"WalletPaymentMethod":return{method:{type:"wallet",name:e.name}};case"LocalPaymentMethod":return{method:{type:"local",paymentMethodIdentifier:null!=(s=e.paymentMethodIdentifier)?s:"",name:e.name}};case"DeferredPaymentMethod":return{method:{type:"deferred",paymentTermsTemplate:{id:e.paymentTermsTemplate.id,dueDate:e.paymentTermsTemplate.dueDate,translatedName:e.paymentTermsTemplate.translatedName,dueInDays:e.paymentTermsTemplate.dueInDays},orderingIndex:e.orderingIndex}};case"ManualPaymentMethod":return{method:{type:"manualPayment",name:e.name,id:e.id,additionalDetails:null!=(d=e.additionalDetails)?d:"",paymentInstructions:null!=(l=e.paymentInstructions)?l:"",paymentMethodIdentifier:null!=(m=e.paymentMethodIdentifier)?m:"",orderingIndex:Number.MAX_SAFE_INTEGER}};case"CustomPaymentMethod":return{method:{type:"customManualPayment",name:e.name,id:e.id,additionalDetails:null!=(p=e.additionalDetails)?p:"",paymentInstructions:null!=(y=e.paymentInstructions)?y:"",paymentMethodIdentifier:null!=(_=e.paymentMethodIdentifier)?_:"",orderingIndex:Number.MAX_SAFE_INTEGER}};default:return{method:{type:"other",orderingIndex:Number.MAX_SAFE_INTEGER}}}}function C(e){switch(e.__typename){case"InventoryClaimFailure":case"InventoryReservationFailure":return{type:"inventory"};case"PaymentFailed":return{type:"payment",code:e.code};case"DiscountUsageLimitExceededFailure":return{type:"discount"};case"OrderCreationFailure":case"OrderCreationSchedulingFailure":return{type:"order"};case"CustomerPersistenceFailure":return{type:"customer_persistence"};default:return{type:"other"}}}function v(e){switch(e.__typename){case"CompletePaymentChallenge":return{type:"complete_payment_challenge",offsiteRedirect:e.offsiteRedirect,url:e.url};default:throw new s("Unable to handle receipt action: "+e.__typename)}}function P(e){switch(e.__typename){case"OrderCreationSucceeded":return{status:"created"};case"OrderCreationPending":default:return{status:"processing"}}}function b(e){switch(e){case o.Ready:return"ready";case o.NotReady:return"notReady";case o.Expired:return"expired";case o.DisabledFeature:return"disabled"}}function f(e){return{lines:e.map(e=>{let{merchandise:t}=e;if("ProductVariantSnapshot"===t.__typename){var n,a,o,i,r,s,d,l,m;const e=t.sellingPlan?{name:t.sellingPlan.name,id:t.sellingPlan.id,digest:t.sellingPlan.digest,deliveriesPerBillingCycle:t.sellingPlan.deliveriesPerBillingCycle,subscriptionDetails:{billingInterval:null==(n=t.sellingPlan)||null==(a=n.subscriptionDetails)||null==(o=a.billingInterval)?void 0:o.toLowerCase(),billingIntervalCount:null==(i=t.sellingPlan.subscriptionDetails)?void 0:i.billingIntervalCount,billingMaxCycles:null==(r=t.sellingPlan.subscriptionDetails)?void 0:r.billingMaxCycles,deliveryInterval:null==(s=t.sellingPlan)||null==(d=s.subscriptionDetails)||null==(l=d.deliveryInterval)?void 0:l.toLowerCase(),deliveryIntervalCount:null==(m=t.sellingPlan.subscriptionDetails)?void 0:m.deliveryIntervalCount}}:void 0;return{id:t.variantId,sellingPlan:e}}}).filter(Boolean)}}}}]);