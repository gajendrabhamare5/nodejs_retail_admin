<!DOCTYPE html>

<html lang="en" class="default-style layout-fixed layout-navbar-fixed">

<head>
    <title>Order Detail | title </title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="Empire Bootstrap admin template made using Bootstrap 4, it has tons of ready made feature, UI components, pages which completely fulfills any dashboard needs." />
    <meta name="keywords" content="Empire, bootstrap admin template, bootstrap admin panel, bootstrap 4 admin template, admin template">
    <meta name="author" content="Srthemesvilla" />
    <link rel="icon" type="image/x-icon" href="/assets/img/favicon.ico?456">

    <!-- Google fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">

    <!-- Icon fonts -->
    <link rel="stylesheet" href="/assets/fonts/fontawesome.css">
    <link rel="stylesheet" href="/assets/fonts/ionicons.css">
    <link rel="stylesheet" href="/assets/fonts/linearicons.css">
    <link rel="stylesheet" href="/assets/fonts/open-iconic.css">
    <link rel="stylesheet" href="/assets/fonts/pe-icon-7-stroke.css">
    <link rel="stylesheet" href="/assets/fonts/feather.css">

    <!-- Core stylesheets -->
    <link rel="stylesheet" href="/assets/css/bootstrap-material.css">
    <link rel="stylesheet" href="/assets/css/shreerang-material.css">
    <link rel="stylesheet" href="/assets/css/uikit.css">

    <!-- Libs -->
    <link rel="stylesheet" href="/assets/libs/perfect-scrollbar/perfect-scrollbar.css">
    <link rel="stylesheet" href="/assets/libs/flot/flot.css">
	<link rel="stylesheet" href="/assets/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.css">
    <link rel="stylesheet" href="/assets/libs/datatables/datatables.css">
	<link rel="stylesheet" href="/assets/libs/dropzone/dropzone.css">
	<link rel="stylesheet" href="/assets/libs/bootstrap-select/bootstrap-select.css">
    <link rel="stylesheet" href="/assets/libs/bootstrap-multiselect/bootstrap-multiselect.css">
    <link rel="stylesheet" href="/assets/libs/select2/select2.css">
    <link rel="stylesheet" href="/assets/libs/bootstrap-tagsinput/bootstrap-tagsinput.css">
	<link rel="stylesheet" href="/assets/libs/growl/growl.css">

	<style>
	.custom-label{
		display: block;
		font-size: 13px;
		font-weight: 400;
	}
	.form-group.col-md-6,.form-group.col-md-4 {
        z-index: 1;
}
	</style>
</head>

<body>
    <!-- [ Preloader ] Start -->
    <div class="page-loader">
        <div class="bg-primary"></div>
    </div>
    <!-- [ Preloader ] End -->

    <!-- [ Layout wrapper ] Start -->
    <div class="layout-wrapper layout-2">
        <div class="layout-inner">
            <!-- [ Layout sidenav ] Start -->
           {{>admin/sidebar}}
            <!-- [ Layout sidenav ] End -->
            <!-- [ Layout container ] Start -->
            <div class="layout-container">
                <!-- [ Layout navbar ( Header ) ] Start -->
                {{>admin/header}}
                <!-- [ Layout navbar ( Header ) ] End -->

                <!-- [ Layout content ] Start -->
                <div class="layout-content">

                    <!-- [ content ] Start -->
                    <div class="container-fluid flex-grow-1 container-p-y">
                        <h4 class="font-weight-bold py-3 mb-0">Edit User</h4>
                        <div class="text-muted small mt-0 mb-4 d-block breadcrumb" style="display:none !important;">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="index.php"><i class="feather icon-home"></i></a></li>
                                <li class="breadcrumb-item ">Order</li>
                                <li class="breadcrumb-item active">Order Detail</li>
                            </ol>
                        </div>

						<div class="row">
							<div class="col-md-8">
								<div class="card mb-4" style="">
									<span class="card-header">
										<h4 style="margin-bottom:0px;">General</h4>
									</span>
									<div class="card-body">
										<div class="form-row">
											<div class="form-group col-md-4">
												<input type="radio" class="" value="retail" name="user_type" <?php if($user_type=="retail"){ echo "checked";} ?>>Normal User
											</div>
											<!-- <div class="form-group col-md-4">
												<input type="radio" class="" value="reseller" name="user_type" <?php if($user_type=="reseller"){ echo "checked";} ?>>Reseller User

											 </div> -->
											 <!--Wholesaler-->
											<!-- <div class="form-group col-md-4">
												<input type="radio" class="" value="wholesale" name="user_type" <?php if($user_type=="wholesale"){ echo "checked";} ?>>Wholesale User
											</div> -->
											<!--reseller-->
										<br>
											<div class="form-group col-md-6">
												<label class="form-label">First Name</label>
												<input type="text" class="form-control" name="fname" id="fname" value="user_fname">
											</div>
											<div class="form-group col-md-6">
												<label class="form-label">Last Name</label>
												<input type="text" class="form-control" name="lname" id="lname" value="user_lname">
											</div>

										<div class="form-group col-md-6">
												<label class="form-label">Email ID</label>
												<input type="text" class="form-control" name="cust_email" id="cust_email" value="Email">
											</div>
										<div class="form-group col-md-6">

												<label class="form-label">Phone Number </label>
												<!--<select class="form-control" id="country_code" onchange="fetch_phonecode()">
												<?php
													$sql_code = $conn->query("select * from country");
													while($fetch_code = mysqli_fetch_assoc($sql_code)){
												?>
													<option value="<?php echo $fetch_code['phonecode']; ?>" <?php if($fetch_code['phonecode'] == $country_code){echo "selected"; } ?>><?php echo $fetch_code['name']; ?></option>
												<?php }?>
												</select>
												<input type="text" class="form-control col-md-2" style="float:left;margin-bottom:1rem;" id="get_country_code" name="get_country_code" value="<?php echo "+".trim($country_code); ?>" readonly>-->
												<input type="number" class="form-control" name="phone" id="phone" value="Phone" readonly>
											</div>
											<div class="form-group col-md-6">

												<label class="form-label">Whatsapp Number </label>
												<!--<select class="form-control" id="country_code1" onclick="fetch_whatsappcode()">
												<?php
													$sql_code = $conn->query("select * from country");
													while($fetch_code = mysqli_fetch_assoc($sql_code)){
												?>
													<option value="<?php echo $fetch_code['phonecode']; ?>" <?php if($fetch_code['phonecode'] == $country_code1){echo "selected"; } ?>><?php echo $fetch_code['name']; ?></option>
												<?php }?>
												</select>
												<input type="text" class="form-control col-md-2" style="float:left;" name="get_country_code1" id="get_country_code1" value="<?php echo "+".trim($country_code1); ?>" readonly>-->
												<input type="number" class="form-control" name="whatsapp" id="whatsapp" value="Whatsno">
											</div>
											<div class="form-group col-md-6">
												<label class="form-label">Company Name</label>
												<input type="text" class="form-control" name="company_name" id="company_name" value="Company_name">
											</div>
											<div class="form-group">
									<label class="form-label">Select Pincode</label>
									<input type="text" class="form-control" id="selected_pincode" name="pincode"  onchange="get_city_state()" value="pincode" autofocus>
								</div>

								<div class="form-group">
									<label class="form-label">State</label>
									<input type="text" class="form-control" id="selected_state" name="state" value="state" disabled>
								</div>

								<div class="form-group">
									<label class="form-label">City</label>
									<input type="text" class="form-control" id="selected_city" value="city" name="city" disabled>
								</div>
								<script>
									function get_city_state(){
										var pincode = $("#selected_pincode").val();
										//alert(cat_id);
										$.ajax({
											type: "POST",
											data:{pincode:pincode},
											url: "ajaxfiles/get_state_from_pincode.php",
											success: function(response){
												//alert(response);
												var obj = JSON.parse(response);

												$("#selected_state").val(obj.state);
												$("#selected_city").val(obj.city);
											}
										});
									}
								</script>
										<div class="form-group col-md-6">
												<label class="form-label">GST number</label>
												<input type="text" class="form-control" name="gst_number" id="gst_number" value="gstNumber">
											</div>
										<div class="form-group col-md-12">
											<label>Address</label>
											<textarea class="form-control" rows="4" name="cust_address" id="cust_address">bill_to</textarea>

										</div>
									</div>
									<button class="btn btn-success" onclick="update(<?php echo $fetch['user_id']; ?>)">Update</button>
								</div>
							</div>
							</div>

							<div class="col-md-4">
								<div class="card mb-4" style="">
									<span class="card-header">
										<h4 style="margin-bottom:0px;">Password</h4>
									</span>
									<div class="card-body">
										<div class="col-md-12" style="float:left;">
											<div class="form-group">
												<label class="form-label">Email</label>
												<input type="email" class="form-control" value="Email" readonly>
											</div>
											<div class="form-group">
												<label class="form-label">Password</label>
												<input type="password" class="form-control" id="password">
											</div>
										</div>
									</div>
									<button class="btn btn-success" onclick="change_password(<?php echo $fetch['user_id']; ?>)">Change Password</button>
								</div>
							</div>
                        </div>

                    </div>
                    <!-- [ content ] End -->

                    <!-- [ Layout footer ] Start -->
                    {{>admin/footer}}
                    <!-- [ Layout footer ] End -->

                </div>
                <!-- [ Layout content ] Start -->

            </div>
            <!-- [ Layout container ] End -->
        </div>
        <!-- Overlay -->
        <div class="layout-overlay layout-sidenav-toggle"></div>
    </div>
    <!-- [ Layout wrapper] End -->

    <!-- Core scripts -->
    <script src="/assets/js/pace.js"></script>
    <script src="/assets/js/jquery-3.2.1.min.js"></script><!-- tables not work in jquery-3.3.1 js -->
    <script src="/assets/libs/popper/popper.js"></script>
    <script src="/assets/js/bootstrap.js"></script>
    <script src="/assets/js/sidenav.js"></script>
    <script src="/assets/js/layout-helpers.js"></script>
    <script src="/assets/js/material-ripple.js"></script>

    <!-- Libs -->
    <script src="/assets/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
	<script src="/assets/libs/eve/eve.js"></script>
    <script src="/assets/libs/flot/flot.js"></script>
    <script src="/assets/libs/flot/curvedLines.js"></script>
    <script src="/assets/libs/chart-am4/core.js"></script>
    <script src="/assets/libs/chart-am4/charts.js"></script>
    <script src="/assets/libs/chart-am4/animated.js"></script>
    <script src="/assets/libs/raphael/raphael.js"></script>
    <script src="/assets/libs/morris/morris.js"></script>
	<script src="/assets/libs/moment/moment.js"></script>
    <script src="/assets/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.js"></script>
    <script src="/assets/libs/datatables/datatables.js"></script>
	<script src="/assets/libs/dropzone/dropzone.js"></script>
	<script src="/assets/libs/bootstrap-select/bootstrap-select.js"></script>
    <script src="/assets/libs/bootstrap-multiselect/bootstrap-multiselect.js"></script>
    <script src="/assets/libs/select2/select2.js"></script>
    <script src="/assets/libs/bootstrap-tagsinput/bootstrap-tagsinput.js"></script>
	<script src="/assets/libs/growl/growl.js"></script>


    <!-- Demo -->
    <script src="/assets/js/demo.js"></script><script src="/assets/js/analytics.js"></script>
	<script src="/assets/js/pages/forms_selects.js"></script>


	<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.0/js/dataTables.buttons.min.js"></script>
      <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.0/js/buttons.html5.min.js"></script>
      <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.0/js/buttons.print.min.js"></script>
      <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.4.0/css/buttons.dataTables.min.css">
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
      <script type="text/javascript" src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.27/build/pdfmake.min.js"></script>
      <script type="text/javascript" src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.27/build/vfs_fonts.js"></script>


	<script>
		function fetch_phonecode(){
			var code = $("#country_code").val();
			$("#get_country_code").val("+"+code);
		}

		function fetch_whatsappcode(){
			var code = $("#country_code1").val();
			$("#get_country_code1").val("+"+code);
		}
	</script>
	<script>

		function update(user_id){
			var fname = $("#fname").val();
			var user_type = $("input[type='radio'][name='user_type']:checked").val();
			var lname = $("#lname").val();
			var company_name = $("#company_name").val();
			var get_country_code = $("#get_country_code").val();
			var phone = $("#phone").val();
			var pincode=$("#selected_pincode").val();
			var state=$("#selected_state").val();
			var city=$("#selected_city").val();
			var get_country_code1 = $("#get_country_code1").val();
			var whatsapp = $("#whatsapp").val();
			var cust_address = $("#cust_address").val();
			var gst_number = $("#gst_number").val();
			var cust_email = $("#cust_email").val();

			$.ajax({
				type: "POST",
				data: {user_id:user_id,fname:fname,lname:lname,company_name:company_name,get_country_code:get_country_code,phone:phone,pincode:pincode,state:state,city:city,get_country_code1:get_country_code1,whatsapp:whatsapp,user_type:user_type,cust_address:cust_address,gst_number:gst_number,cust_email:cust_email},
				url: "ajaxfiles/update_user_general.php",
				success: function(response){
					if(response == "ok"){
						location.reload();
					}
				}
			});
		}

		function change_password(user_id){
			var pass = $("#password").val();

			$.ajax({
				type: "POST",
				data: {user_id:user_id,pass:pass},
				url: "ajaxfiles/update_user_password.php",
				success: function(response){
					if(response == "ok"){
						$.growl.notice({
						  message:  'Password Updated Succesfully!',
						  location: 'tr'
						});
						$("#password").val("");
					}
				}
			});
		}

		function get_bsc(){
			var pincode = $("#pincode").val();
			$.ajax({
				type: "POST",
				dataType: "JSON",
				url: "../ajaxfiles/fetch_country_code.php",
				data: { pincode : pincode},
				success: function(data){

					$("#state").val(data.state_name);
					$("#city").val(data.city_name);

				}
			});
		}

		function get_ssc(i){
			var pincode = $("#pincode"+i).val();
			$.ajax({
				type: "POST",
				dataType: "JSON",
				url: "../ajaxfiles/fetch_country_code.php",
				data: { pincode : pincode},
				success: function(data){

					$("#state"+i).val(data.state_name);
					$("#city"+i).val(data.city_name);

				}
			});
		}

		function update_billing(address_id){
			var f_name = $("#f_name").val();
			var l_name = $("#l_name").val();
			var phone_no = $("#phone_no").val();
			var whatsapp_no = $("#whatsapp_no").val();
			var email_id = $("#email_id").val();
			var address1 = $("#address1").val();
			var address2 = $("#address2").val();
			var pincode = $("#pincode").val();
			var country = $("#country").val();
			var state = $("#state").val();
			var city = $("#city").val();
			var gst_no = $("#gst_no").val();

			$.ajax({
				type: "POST",
				data: {address_id:address_id,f_name:f_name,l_name:l_name,phone_no:phone_no,whatsapp_no:whatsapp_no,email_id:email_id,address1:address1,address2:address2,pincode:pincode,country:country,state:state,city:city,gst_no:gst_no},
				url: "ajaxfiles/update_user_billing.php",
				success: function(response){
					if(response == "ok"){
						location.reload();
					}
				}
			});
		}

		function update_shipping(address_id,i){
			var f_name = $("#f_name"+i).val();
			var l_name = $("#l_name"+i).val();
			var phone_no = $("#phone_no"+i).val();
			var whatsapp_no = $("#whatsapp_no"+i).val();
			var email_id = $("#email_id"+i).val();
			var address1 = $("#address1"+i).val();
			var address2 = $("#address2"+i).val();
			var pincode = $("#pincode"+i).val();
			var country = $("#country"+i).val();
			var state = $("#state"+i).val();
			var city = $("#city"+i).val();

			$.ajax({
				type: "POST",
				data: {address_id:address_id,f_name:f_name,l_name:l_name,phone_no:phone_no,whatsapp_no:whatsapp_no,email_id:email_id,address1:address1,address2:address2,pincode:pincode,country:country,state:state,city:city},
				url: "ajaxfiles/update_user_shipping.php",
				success: function(response){
					if(response == "ok"){
						location.reload();
					}
				}
			});
		}

	</script>

</body>


</html>
