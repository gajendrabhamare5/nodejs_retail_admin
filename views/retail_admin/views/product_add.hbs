<!DOCTYPE html>

<html lang="en" class="default-style layout-fixed layout-navbar-fixed">

<head>
    <title>Catalog | title </title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="description"
        content="Empire Bootstrap admin template made using Bootstrap 4, it has tons of ready made feature, UI components, pages which completely fulfills any dashboard needs." />
    <meta name="keywords"
        content="Empire, bootstrap admin template, bootstrap admin panel, bootstrap 4 admin template, admin template">
    <meta name="author" content="Srthemesvilla" />
    <link rel="icon" type="image/x-icon" href="<?php echo $fav_icon ?>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
        async>

    <!-- Google fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">

    <!-- Icon fonts -->
    <link rel="stylesheet" href="/assets/fonts/fontawesome.css">
    <link rel="stylesheet" href="/assets/fonts/ionicons.css">
    <link rel="stylesheet" href="/assets/fonts/linearicons.css">
    <link rel="stylesheet" href="/assets/fonts/open-iconic.css">
    <link rel="stylesheet" href="/assets/fonts/pe-icon-7-stroke.css">
    <link rel="stylesheet" href="/assets/fonts/feather.css">

    <!-- Core stylesheets -->
    <link rel="stylesheet" href="/assets/css/bootstrap-material.css">
    <link rel="stylesheet" href="/assets/css/shreerang-material.css">
    <link rel="stylesheet" href="/assets/css/uikit.css">

    <!-- Libs -->
    <link rel="stylesheet" href="/assets/libs/perfect-scrollbar/perfect-scrollbar.css">
    <link rel="stylesheet" href="/assets/libs/flot/flot.css">
    <link rel="stylesheet" href="/assets/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.css">
    <link rel="stylesheet" href="/assets/libs/datatables/datatables.css">
    <link rel="stylesheet" href="/assets/libs/dropzone/dropzone.css">
    <link rel="stylesheet" href="/assets/libs/bootstrap-select/bootstrap-select.css">
    <link rel="stylesheet" href="/assets/libs/bootstrap-multiselect/bootstrap-multiselect.css">
    <link rel="stylesheet" href="/assets/libs/select2/select2.css">
    <link rel="stylesheet" href="/assets/libs/bootstrap-tagsinput/bootstrap-tagsinput.css">
    <link rel="stylesheet" href="/assets/libs/growl/growl.css">
    {{!-- <script src="https://cdn.ckeditor.com/4.12.1/standard/ckeditor.js"></script> --}}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ckeditor/4.9.2/ckeditor.js"></script>
    <!--<script src="ckfinder/ckfinder.js"></script>-->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
</head>

<body>
    <!-- [ Preloader ] Start -->
    <div class="page-loader">
        <div class="bg-primary"></div>
    </div>
    <!-- [ Preloader ] End -->

    <!-- [ Layout wrapper ] Start -->
    <div class="layout-wrapper layout-2">
        <div class="layout-inner">
            <!-- [ Layout sidenav ] Start -->
            {{>admin/sidebar}}
            <!-- [ Layout sidenav ] End -->
            <!-- [ Layout container ] Start -->
            <div class="layout-container">
                <!-- [ Layout navbar ( Header ) ] Start -->
                {{>admin/header}}
                <!-- [ Layout navbar ( Header ) ] End -->

                <!-- [ Layout content ] Start -->
                <div class="layout-content">

                    <!-- [ content ] Start -->
                    <div class="container-fluid flex-grow-1 container-p-y">
                        <h4 class="font-weight-bold py-3 mb-0">Add Catalog</h4>
                        <div class="text-muted small mt-0 mb-4 d-block breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="/index"><i class="feather icon-home"></i></a>
                                </li>
                                <li class="breadcrumb-item ">Catalog</li>
                                <li class="breadcrumb-item active">Add Catalog</li>
                            </ol>
                        </div>
                        <form method="POST" action="/product_add" enctype="multipart/form-data">

                            <div class="row">
                                <div class="col-md-10">
                                    <div class="card mb-4">
                                        <h6 class="card-header">Add New Catalog</h6>
                                        <div class="card-body">
                                            <div class="form-group">
                                                <label class="form-label">Select Categories</label>
                                                <select class="select2-demo form-control" multiple style="width: 100%"
                                                    id="selected_cat" name="selected_cat[]" onchange="get_subcat1()"
                                                    autofocus>
                                                    {{#each category}}
                                                    <option value="{{this._id}}">
                                                        {{this.category_name}}</option>
                                                    {{/each}}
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Select Subcategories</label>
                                                <select class="select2-demo form-control" multiple style="width: 100%"
                                                    id="get_subcat" name="selected_subcat[]">
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                            <!--<button type="button" class="btn btn-info" onclick="add_products()">Add More Catalog</button>-->

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="products" class="row">
                                <div class="col-md-10">
                                    <div class="card mb-4">
                                        <h6 class="card-header">Catalog 1</h6>
                                        <div class="card-body">
                                            <label class="form-group col-md-4">
                                                <input type="radio" name="product_type1" value="Ready to Ship"> Ready to
                                                Ship
                                            </label>
                                            <label class="form-group col-md-4">
                                                <input type="radio" name="product_type1" value="Upcoming"> Upcoming
                                            </label>
                                            <label class="form-group col-md-4">
                                                <input type="radio" name="product_type1" value="Ask Availibility"> Ask
                                                Availibility
                                            </label>
                                            <label class="form-group col-md-4">
                                                <input type="radio" name="product_type1" value="On Booking"> On Booking
                                            </label>
                                            <label class="form-group col-md-4">
                                                <input type="radio" name="product_type1" value=""> None
                                            </label>

                                            <div class="form-group col-md-12">
                                                <label class="form-label col-md-12">
                                                    <input type="checkbox" id="upcoming_checkbox1"
                                                        name="upcoming_checkbox[]"> Featured/Hot Products
                                                </label>
                                            </div>
                                            <!--<div class="form-group">
									<label class="form-label">Single Catalog</label>
									<select class="select2-demo form-control" style="width: 100%" id="selected_catalog1" name="selected_catalog[]" autofocus>
									<option value="Select">Select Catalog</option>
									<?php
									$sql1 = $conn->query("select sub.* from subcategory_master as sub,category_master cat where sub.category_id=cat.category_id AND sub.subcategory_delete='0' AND cat.type_id=15");
									while ($fetch1 = mysqli_fetch_assoc($sql1)) {
									?>
										<option value="<?php echo $fetch1['subcategory_id']; ?>"><?php echo $fetch1['subcategory_name']; ?></option>
									<?php }

									?>
									</select>
								</div>-->

                                            <div class="form-group col-md-12">
                                                <label class="form-label">Select Image</label>
                                                <input type="file" name="image_file" accept="image/*"
                                                    class="form-control" onchange="readURL(this,1);" id="image_file1">
                                                <img id="blah1" src=""
                                                    style="max-width:150px;max-height:150px;margin: auto;padding: 10px;">
                                            </div>

                                            <div class="form-group col-md-12">
                                                <label class="form-label col-md-12">Select Sub-Images</label>
                                                <input type="file" name="subimage_file1[]" accept="image/*"
                                                    class="form-control" multiple onchange="get_subimages(this,1);"
                                                    id="subimage_file1">
                                                <div class="gallery1"></div>
                                            </div>

                                            <!--	<div class="form-group col-md-6" style="float:left">
									<label class="form-label">SKU</label>
									<input type="text" class="form-control" id="product_sku1" name="product_sku[]" value="<?php echo $sku; ?>" readonly>
								</div>
								-->
                                            <div class="form-group col-md-12">
                                                <label class="form-label">HSN Code</label>
                                                <input type="text" class="form-control" id="product_hsn1"
                                                    name="product_hsn[]">
                                            </div>

                                            <div class="form-group col-md-12">
                                                <label class="form-label">Title</label>
                                                <input type="text" class="form-control" id="product_name1"
                                                    name="product_name[]">
                                            </div>
                                            <div class="form-group col-md-12">
                                                <label class="form-label">Title Short</label>
                                                <input type="text" class="form-control" id="cname1" name="cname[]">
                                            </div>

                                            <!--<div class="form-group">
									<label class="form-label">Select Fabric</label>
									<select class="select2-demo form-control" multiple style="width: 100%" id="selected_fabric1" name="selected_fabric1[]">
									<option value="">Select Fabric</option>
									<?php
									$sql5 = $conn->query("select * from fabric_master where fabric_hide=0 order by fabric_name");
									while ($fetch5 = mysqli_fetch_assoc($sql5)) {
									?>
										<option value="<?php echo $fetch5['fabric_id']; ?>"><?php echo $fetch5['fabric_name']; ?></option>
									<?php }

									?>
									</select>
								</div>-->

                                            <div class="form-group col-md-12">
                                                <label class="form-label">Select Brand</label>
                                                <select class="select2-demo form-control" style="width: 100%"
                                                    id="selected_brand1" name="selected_brand[]">
                                                    <option value="">Select Brand</option>
                                                    {{#each brand}}
                                                    <option value="{{this._id}}">{{this.brand_name}}</option>
                                                    {{/each}}
                                                </select>
                                            </div>

                                            <!-- <div class="form-group col">
                                                <label class="form-label">Select Dealer</label>
                                                <select class="select2-demo form-control" style="width: 100%" id="selected_dealer" name="selected_dealer">
                                                    <option value="">Select Dealer</option>
                                                    <?php
                                                        $sql_dealer_master = $conn->query("select * from dealer_master order by first_name asc");
                                                        while($fetch_dealer_master = mysqli_fetch_assoc($sql_dealer_master)){
                                                    ?>
                                                    <option value="<?php echo $fetch_dealer_master['dealer_id']; ?>"><?php echo $fetch_dealer_master['first_name'].' '.$fetch_dealer_master['last_name'];?></option>
                                                        <?php } ?>
                                                </select>

                                            </div> -->

                                            <div class="form-group col-md-6" style="float:left;">
                                                <label class="form-label">MRP Price Per Pc</label>
                                                <input type="number" class="form-control" id="mrp_price1"
                                                    name="mrp_price[]">
                                            </div>
                                            <div class="form-group col-md-6" style="float:right;">
                                                <label class="form-label"> Sell Price Per Pc</label>
                                                <input type="number" class="form-control" id="product_price1"
                                                    name="product_price[]">
                                            </div>



                                            <!--<div class="form-group col-md-6" style="float:left;">
									<label class="form-label">Reseller Price Per Pc</label>
									<input type="number" class="form-control" id="product_reseller_price1" name="product_reseller_price[]">
								</div>

								<div class="form-group col-md-6" style="float:right;">
									<label class="form-label">Reseller MRP Price Per Pc</label>
									<input type="number" class="form-control" id="mrp_reseller_price1" name="mrp_reseller_price[]">
								</div>-->

                                            <div class="form-group col-md-6" style="float:left;">
                                                <label class="form-label">PCS</label>
                                                <input type="number" class="form-control" id="catalog_pcs1"
                                                    name="catalog_pcs[]">
                                            </div>

                                            <div class="form-group col-md-6" style="float:right;">
                                                <label class="form-label">GST</label>
                                                <input type="number" class="form-control" id="product_gst1" value="5"
                                                    name="product_gst[]">
                                            </div>

                                            <div class="form-group col-md-6" style="float:left;">
                                                <label class="form-label">Weight (kg)</label>
                                                <input type="number" class="form-control" step="0.01"
                                                    id="product_weight1" name="product_weight[]">
                                            </div>

                                            <div class="form-group col-md-6" style="float:right;">
                                                <label class="form-label">Stitch</label>
                                                <select class="form-control" id="product_stitch1"
                                                    name="product_stitch[]">
                                                    <option value="">Select Stitch</option>
                                                    <option value="Unstitched">Unstitched</option>
                                                    <option value="Semi Stitched">Semi Stitched</option>
                                                    <option value="Full Stitched">Full Stitched</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Video Link</label>
                                                <input type="text" class="form-control" id="video_link1" value=""
                                                    name="video_link[]">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Is Size Available?</label>
                                                <input type="checkbox" id="size_checkbox1" name="size_checkbox1[]"
                                                    onchange="check_size_available(1)">
                                            </div>

                                            <div id="unchecked_size1">
                                                <div class="form-group">
                                                    <label class="form-label">Quantity (Stock)</label>
                                                    <input type="number" class="form-control" id="product_quantity1"
                                                        name="product_quantity[]">
                                                </div>
                                            </div>

                                            <div id="checked_size1" style="display:none;">
                                                <div class="form-group">

                                                    <button type="button" class="btn btn-info" onclick="add_size(1)">Add
                                                        Size</button>

                                                </div>
                                                <div id="show_size1">
                                                    <div class="row">
                                                        <div class="form-group col-md-4">
                                                            <label class="form-label">Size</label>
                                                            <select class="form-control" id="product_size1"
                                                                name="product_size1[]">
                                                                {{#each size}}
                                                                <option value="{{this._id}}">
                                                                    {{this.size_name}}
                                                                </option>
                                                                {{/each}}
                                                            </select>
                                                        </div>
                                                        <div class="form-group col-md-4">
                                                            <label class="form-label">Quantity</label>
                                                            <input type="number" class="form-control"
                                                                id="product_quantity1" name="product_quantity1[]">
                                                        </div>
                                                        <div class="form-group col-md-4">
                                                            <label class="form-label">Price</label>
                                                            <input type="number" class="form-control" id="size_price1"
                                                                name="size_price1[]">
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="form-group col-md-12">
                                                    <label class="form-label col-md-12"></label>
                                                    <button type="button" class="btn btn-info"
                                                        style="margin: 8px;border-radius: 25px;" id="btn"
                                                        onclick="add_attribute(1)"><i class="fa fa-plus"
                                                            aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Add
                                                        Atrributes</button>
                                                </div>
                                            </div>
                                            <div id="show_attribute1"></div>
                                            <div class="form-group" style="display:none;">
                                                <label class="form-label">Select Color</label>
                                                <select class="select2-demo form-control" multiple style="width: 100%"
                                                    id="selected_color1" name="selected_color1[]">
                                                    <option value="">Select Color</option>

                                                    <option value="<?php echo $fetch5['color_id']; ?>">


                                                </select>
                                            </div>

                                            <!--<div class="form-group col-md-6" style="float:left">
									<label class="form-label">Catalog type (Set)</label>
									<input type="text" class="form-control" id="catalog_type1" name="catalog_type[]">
								</div>
								<div class="form-group col-md-6" style="float:right">
									<label class="form-label">MOQ</label>
									<input type="number" class="form-control" id="moq1" name="moq[]">
								</div>-->

                                            <span class="extrablock accessories_block" style="display:none;">
                                                <div class="row">
                                                    <div class="form-group col-md-6">
                                                        <label class="form-label">Length</label>
                                                        <input type="text" class="form-control" id="accessories_length1"
                                                            name="accessories_length[]">
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label class="form-label">Fabric</label>
                                                        <input type="text" class="form-control" id="fabric1"
                                                            name="fabric[]">
                                                    </div>
                                                </div>
                                            </span>
                                            <span class="extrablock kurtiesblock western_night_wearblock"
                                                style="display:none;">
                                                <div class="row">
                                                    <div class="form-group col-md-6">
                                                        <label class="form-label">Top</label>
                                                        <input type="text" class="form-control" id="top_fabric1"
                                                            name="top_fabric[]">
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label class="form-label">Bottom</label>
                                                        <input type="text" class="form-control" id="bottom_fabric1"
                                                            name="bottom_fabric[]">
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label class="form-label">Top Length</label>
                                                        <input type="text" class="form-control" id="length1"
                                                            name="length[]">
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label class="form-label">Bottom Length</label>
                                                        <input type="text" class="form-control" id="bottom1"
                                                            name="bottom[]">
                                                    </div>
                                                </div>
                                            </span>
                                            <span class="extrablock sareesblock" style="display:none;">
                                                <div class="row">
                                                    <div class="form-group col-md-6">
                                                        <label class="form-label">Saree</label>
                                                        <input type="text" class="form-control" id="saree_fabric1"
                                                            name="saree_fabric[]">
                                                    </div>

                                                    <div class="form-group col-md-6">
                                                        <label class="form-label">Cut</label>
                                                        <input type="text" class="form-control" id="cut1"
                                                            name="cutfab[]">
                                                    </div>

                                                </div>
                                            </span>
                                            <span class="extrablock lehengablock" style="display:none;">
                                                <div class="row">
                                                    <div class="form-group col-md-6">
                                                        <label class="form-label">Lehenga</label>
                                                        <input type="text" class="form-control" id="lehenga_fabric1"
                                                            name="lehenga_fabric[]">
                                                    </div>


                                                </div>
                                            </span>
                                            <span class="extrablock lehengablock kurtiesblock" style="display:none;">
                                                <div class="row">
                                                    <div class="form-group col-md-6">
                                                        <label class="form-label">Dupatta</label>
                                                        <input type="text" class="form-control" id="dupatta_fabric1"
                                                            name="dupatta_fabric[]">
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <label class="form-label">Inner</label>
                                                        <input type="text" class="form-control" id="ideal_for1"
                                                            name="inner_for[]">
                                                    </div>

                                                </div>
                                            </span>
                                            <span class="extrablock lehengablock sareesblock" style="display:none;">
                                                <div class="row">
                                                    <div class="form-group col-md-6">
                                                        <label class="form-label">Blouse</label>
                                                        <input type="text" class="form-control" id="blouse_fabric1"
                                                            name="blouse_fabric[]">
                                                    </div>

                                                </div>
                                            </span>

                                            <div class="form-group">
                                                <label class="form-label col-md-12">Disable Date</label>
                                                <input type="date" class="form-control" id="disable_date1"
                                                    value="<?php echo $disable_date;?>" name="disable_date[]">
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label">Catalog Short Description</label>
                                                <input type="text" class="form-control" id="product_short_description1"
                                                    name="product_short_description[]">
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label">Catalog Full Description</label>
                                                <input type="text" class="form-control" id="product_full_description1"
                                                    name="product_full_description[]">
                                            </div>



                                            <div class="form-group" style="display:none;">
                                                <label class="form-label">Product Status</label>
                                                <select class="form-control" id="product_status1"
                                                    name="product_status[]">
                                                    <option value="Publish">Publish</option>
                                                    <option value="Draft">Draft</option>
                                                    <option value="Private">Private</option>
                                                </select>
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label">Meta Title</label>
                                                <input type="text" class="form-control" id="product_meta_title1"
                                                    name="product_meta_title[]">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Meta Keyword</label>
                                                <input type="text" class="form-control" id="product_meta_keyword1"
                                                    name="product_meta_keyword[]">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Meta Description</label>
                                                <input type="text" class="form-control" id="product_meta_desc1"
                                                    name="product_meta_desc[]">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Other Details</label>
                                                <textarea name="editor[]" id="editor1"></textarea>
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label">Notes</label>
                                                <input type="text" class="form-control" id="notes" name="notes">
                                            </div>

                                            <input type="hidden" value="2" id="total" name="total">
                                            <input type="hidden" value="2" id="total_size1" name="total_size1">
                                            <input type="hidden" value="1" id="total_attribute1"
                                                name="total_attribute1">
                                            <small class="form-text text-muted" id="error1"
                                                style="display:none;margin-bottom:15px; color:red !important;"></small>
                                            <!--<input type="hidden" value="<?php echo $user_name; ?>" id="author_name" name="author_name">-->
                                            <!--<button type="button" class="btn btn-info" onclick="add_products()">Add More Catalog</button>-->
                                            <input type="button" onclick="submit_product()" class="btn btn-success"
                                                style="float:right;" value="Submit">
                                            <!--<button type="button" id="" class="btn btn-primary" onclick=""></button>-->
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </form>

                    </div>
                    <!-- [ content ] End -->

                    <!-- [ Layout footer ] Start -->
                    {{>admin/footer}}
                    <!-- [ Layout footer ] End -->

                </div>
                <!-- [ Layout content ] Start -->

            </div>
            <!-- [ Layout container ] End -->
        </div>
        <!-- Overlay -->
        <div class="layout-overlay layout-sidenav-toggle"></div>
    </div>
    <!-- [ Layout wrapper] End -->

    <!-- Core scripts -->
    <script src="/assets/js/pace.js"></script>
    <script src="/assets/js/jquery-3.2.1.min.js"></script><!-- tables not work in jquery-3.3.1 js -->
    <script>
        /*		$(document).on('focus', '.select2-selection.select2-selection--single', function (e) {
      $(this).closest(".select2-container").siblings('select:enabled').select2('open');
    });

    // steal focus during close - only capture once and stop propogation
    $('select.select2').on('select2:closing', function (e) {
      $(e.target).data("select2").$selection.one('focus focusin', function (e) {
        e.stopPropagation();
      });
    });*/
    </script>
    <script src="/assets/libs/popper/popper.js"></script>
    <script src="/assets/js/bootstrap.js"></script>
    <script src="/assets/js/sidenav.js"></script>
    <script src="/assets/js/layout-helpers.js"></script>
    <script src="/assets/js/material-ripple.js"></script>

    <!-- Libs -->
    <script src="/assets/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="/assets/libs/eve/eve.js"></script>
    <script src="/assets/libs/flot/flot.js"></script>
    <script src="/assets/libs/flot/curvedLines.js"></script>
    <script src="/assets/libs/chart-am4/core.js"></script>
    <script src="/assets/libs/chart-am4/charts.js"></script>
    <script src="/assets/libs/chart-am4/animated.js"></script>
    <script src="/assets/libs/raphael/raphael.js"></script>
    <script src="/assets/libs/morris/morris.js"></script>
    <script src="/assets/libs/moment/moment.js"></script>
    <script src="/assets/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.js"></script>
    <script src="/assets/libs/datatables/datatables.js"></script>
    <script src="/assets/libs/dropzone/dropzone.js"></script>
    <script src="/assets/libs/bootstrap-select/bootstrap-select.js"></script>
    <script src="/assets/libs/bootstrap-multiselect/bootstrap-multiselect.js"></script>
    <script src="/assets/libs/select2/select2.js"></script>
    <script src="/assets/libs/bootstrap-tagsinput/bootstrap-tagsinput.js"></script>
    <script src="/assets/libs/growl/growl.js"></script>


    <!-- Demo -->
    <script src="/assets/js/demo.js"></script>
    <script src="/assets/js/analytics.js"></script>
    <script src="/assets/js/pages/forms_selects.js"></script>


    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.0/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.0/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.0/js/buttons.print.min.js"></script>
    <link rel="stylesheet" type="text/css"
        href="https://cdn.datatables.net/buttons/1.4.0/css/buttons.dataTables.min.css">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.27/build/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.27/build/vfs_fonts.js"></script>

    <style>
        .remove_img_preview {
            position: relative;
            top: -31px;
            right: 17px;
            background: black;
            color: white;
            border-radius: 50px;
            font-size: 0.9em;
            padding: 0 0.3em 0;
            text-align: center;
            cursor: pointer;
        }

        .remove_img_preview:before {
            content: "Ã—";
        }

        .btn-info {
            background: black;
            box-shadow: 0 2px 4px -1px rgb(0 0 0 / 7%), 0 4px 5px 0 rgb(0 0 0 / 5%), 0 1px 10px 0 rgb(0 0 0 / 3%);
            color: #fff;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
            margin-right: -4.75rem;
            margin-left: -0.75rem;
        }

        .fa {
            display: inline-block;
            font: normal normal normal 14px/1 FontAwesome;
            font-size: inherit;
            text-rendering: auto;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <button type="button" class="close" data-dismiss="modal" style="color: black;opacity: unset;"><i
                        class="fa fa-times-circle" aria-hidden="true" style="float: right;"></i></button>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">Select Attribute</label>
                        <input type="hidden" id="dynamicid">
                        <select class="form-control" style="width: 100%" id="attribute_name" name="attribute_name">
                            <option value="">Select Attribute</option>

                             {{#each attributeData}}
                                      <option value="{{this._id}}">{{this.attribute_name}}</option>
                                      {{/each}}

                        </select>
                    </div>
                    <div class="form-group">
                        <input type="text" name="sub_attribute_name" id="sub_attribute_name"
                            placeholder="Sub Attribute Name" class="form-control form_control" required="">
                    </div>
                    <p id="subattribute_error" style="font-size:15px;color:red;display:none;"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" style="color: white;background-color: green;"
                        onclick="sub_attribute_add()">Add</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        CKEDITOR.replace('editor1', {
            filebrowserUploadUrl: 'ckeditor/ck_upload.php',
            filebrowserUploadMethod: 'form'
        });
    </script>
    <script>
        //Attributes//

        function add_attribute(i) {
            var k = $("#total_attribute" + i).val();

            var append_attribute = `<div class="attributediv" id="attribute${i}_${k}">
                            <div class="row">
                                    <div class="form-group col-md-1">
                                    <label class="form-label col-md-12"></label>
                                    <button type="button" class="btn btn-info" style="margin: 8px;border-radius: 25px;background: green;" id="btn" onclick="add_attribute(1)"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                    </div>&nbsp;&nbsp;&nbsp;&nbsp;

                                    <div class="form-group col-md-4">
                                    <label class="form-label col-md-12"> Select Attribute </label>

                                    <select id="product_attributea${i}_${k}" name="product_attributea${i}[${k}][]" class="select2-demo form-control abc" onchange="myfun(this.value,${i},${k})" data-placeholder="Choose Sub Category">
                                        <option value="" disabled selected>Choose Attribute</option>
                                        {{#if attributeData.length}}
                                        {{#each attributeData}}
                                      <option value="{{this._id}}">{{this.attribute_name}}</option>
                                      {{/each}}
                                      {{/if}}
                                    </select>

                                    </div>

                                    <div class="form-group col-md-4">
                                    <label class="form-label col-md-12" data-toggle="modal" data-target="#myModal" id="atimepicker" data-value="11:45AM" style="display:flex;"> Select Sub Attribute <i class="fas fa-plus" id="plusattribute${i}_${k}" onclick="attributeAdd(${i},${k})" style="background: black;font-size: 10px;border-radius: 10px;width: 20px;height: 20px;padding: 5px;color: white;cursor: pointer;display:none;"></i></label>
                                    <select id="product_subattribute${i}_${k}" name="product_subattribute${i}[${k}][]" class="select2-demo form-control abc1" multiple="multiple">
									</select>
                                    </div>

                                    <div class="form-group col-md-1">
                                    <label class="form-label col-md-12"></label>
                                    <button style="margin: 6px;background: red;border-radius: 25px;" type="button" class="btn btn-info" onclick="remove_attribute(${i},${k})" id="btnn${i}_${k}"><i class="fa fa-minus" aria-hidden="true"></i></button>
                                    </div>
                                </div>
                            </div>
                            </div>`;
            $("#show_attribute" + i).append(append_attribute);
            k++;
            $("#total_attribute" + i).val(k);
            chnagedrop();
        }

        function chnagedrop() {
            $(".abc option").removeAttr('disabled');
            $(".abc :selected").each(function () {
                var selectedValue = $(this).val();
                $(".abc option[value='" + selectedValue + "']").prop('disabled', true);
            });
            $(".select2-demo").select2();
        }
        $(document).on('change', '.abc', function () {
            chnagedrop()
        })

        function remove_attribute(i, k) {
            var j = $("#total_attribute" + i).val();
            var remove = parseInt(j) - 1;

            {{!-- console.log("remove=" + remove); --}}
            $("#attribute" + i + "_" + k).remove();
            if (k == remove) {
                $("#total_attribute" + i).val(remove);
            }
            if (!jQuery("div").hasClass("attributediv")) {
                $("#total_attribute" + i).val(2);
            }
            chnagedrop();
        }
        //End Attributes//
    </script>
    <script>
        function sub_attribute_add() {
            var attribute_name = $("#attribute_name").val();
            var sub_attribute_name = $("#sub_attribute_name").val();
            /* if(attribute_name == "" && sub_attribute_name == "")
            {
                $("#subattribute_error").show();
                $("#subattribute_error").html("ALL FILEDS ARE REQUIRED.");
                setTimeout(function(){ $("#subattribute_error").hide();}, 1000);
            } */
            /* 	else
                { */
            $("#subattribute_error").hide();
            $.ajax({
                type: "POST",
                dataType: "JSON",
                data: {
                    attribute_name: attribute_name,
                    sub_attribute_name: sub_attribute_name
                },
                url: "/subattribute_pop_process",
                success: function (response) {
                    if (response.status == "ok") {
                        var dynamicid = $("#dynamicid").val();
                        $('#product_subattribute' + dynamicid).append('<option value="' + sub_attribute_name +
                            '">' + sub_attribute_name + '</option>');

                        setTimeout(function () {
                            $(".close").click();
                        }, 1000);
                        $("#dynamicid").val("");
                        $("#attribute_name").val("");
                        $("#sub_attribute_name").val("");
                        $('#attribute_name').prop('disabled', false);

                    }
                    if (response.status == "error") {
                        $("#subattribute_error").show();
                        $("#subattribute_error").html(response.message);

                    }
                }
            });
            /* } */
        }

        function attributeAdd(i, k) {

            var selected_attr = $("#product_attributea" + i + "_" + k + " option[disabled]:selected").val();
            $("#attribute_name").val(selected_attr);
            $('#attribute_name').prop('disabled', true);
            $("#dynamicid").val(i + "_" + k);
            //    $('#modal').modal('show');
        }

        var imageArray = [];

        // Multiple images preview in browser
        function imagesPreview(input, placeToInsertImagePreview, productcount) {
            if (input.files && imageArray.length) {
                var a = Array.from(input.files);
                //console.log(a);
                var b = imageArray;
                //console.log(b);
                var c = b.concat(a);
                input.files = new FileListItem(c);
                imageArray = c;
            } else if (imageArray.length) {
                var a = new FileListItem(imageArray);
                input.files = new FileListItem(imageArray);
                imageArray = a;
            }
            if (input.files) {
                var filesAmount = input.files.length;
                imageArray = Array.from(input.files);
                var j = 0;
                for (i = 0; i < filesAmount; i++) {


                    var reader = new FileReader();

                    reader.onload = function (event) {
                        j++;
                        var id = productcount + '_img' + j;
                        {{!-- console.log("hii=" + id); --}}
                        $($.parseHTML('<span id="' + id +
                            '"><img   style="max-height:100px;max-width:100px;margin:5px;cursor:pointer;" src="' +
                            event.target.result +
                            '"><span class="remove_img_preview" onclick="remove_image(\'' + id + '\',' +
                            productcount + ',' + j + ')"></span></span>')).appendTo(placeToInsertImagePreview);
                    }

                    reader.readAsDataURL(input.files[i]);

                }
            }
        };

        function myfun(datavalue, i, k) {

            var product_attributea = $("#product_attributea" + i + "_" + k).val();
            if (product_attributea != "") {
                $("#plusattribute" + i + "_" + k).css('display', 'block');
            } else {
                $("#plusattribute" + i + "_" + k).css('display', 'none');
            }

            $.ajax({
                url: '/product_attribute',
                type: 'POST',
                data: {
                    datapost: datavalue
                },

                success: function (result) {
                    $('#product_subattribute' + i + '_' + k + '').html(result);
                }
            });
        }

        function remove_image(id, i, j) {
            //console.log(j);
            //console.log(i);
            //$('#subimage_file'+i).val(delete_id.join(','));
            /////console.log(delete_id);*/
            var a = Array.from($("#subimage_file" + i)[0].files);
            j = j - 1;
            if (j > a.length - 1) {
                j = a.length - 1;
            }
            a.splice(j, 1);
            imageArray = a;
            //console.log(a);
            $("#subimage_file" + i)[0].files = new FileListItem(a);

            $("#" + id).remove();

        }

        function FileListItem(a) {
            a = [].slice.call(Array.isArray(a) ? a : arguments)
            for (var c, b = c = a.length, d = !0; b-- && d;) d = a[b] instanceof File
            if (!d) throw new TypeError("expected argument to FileList is File or array of File objects")
            for (b = (new ClipboardEvent("")).clipboardData || new DataTransfer; c--;) b.items.add(a[c])
            return b.files
        }

        function get_subimages(input, i) {
            //var a = Array.from($("#subimage_file"+i)[0].files);
            $('div.gallery' + i).html("");
            imagesPreview(input, 'div.gallery' + i, i);
        };
    </script>

    <script>
        function check_size_available(i) {

            if ($("#size_checkbox" + i).prop("checked") == true) {
                $("#unchecked_size" + i).hide();
                $("#checked_size" + i).show();
                var product_price = $("#product_price" + i).val();
                $("#size_price" + i).val(product_price);

            } else if ($("#size_checkbox" + i).prop("checked") == false) {
                $("#unchecked_size" + i).show();
                $("#checked_size" + i).hide();
            }

        }
    </script>

    <script type="text/javascript">
        function add_size(i) {
            var k = $("#total_size" + i).val();
            var product_price = $("#product_price" + i).val();
            var append_size = `<div id="sizes${i}_${k}"><div class="row"><div class="form-group col-md-3"><label class="form-label">Size</label><select class="form-control" id="product_size${i}_${k}" name="product_size${i}[]">
            {{#each size}}
				<option value="{{this._id}}">{{this.size_name}}</option>{{/each}}</select></div><div class="form-group col-md-3"><label class="form-label">Quantity</label><input type="number" class="form-control" id="product_quantity${i}_${k}" name="product_quantity${i}[]"></div><div class="form-group col-md-4"><label class="form-label">Price</label><input type="number" class="form-control" id="size_price${i}" name="size_price${i}[]" value="${product_price}"></div><div class="form-group col-md-2"><button type="button" class="btn btn-round btn-default" onclick="remove_size('${i}','${k}')"><i class="ion ion-md-close align-middle" style="color:red;font-size:20px;"></i></button></div></div></div>`;

            $("#show_size" + i).append(append_size);
            k++;
            $("#total_size" + i).val(k);
        }
    </script>

    <script>
        function remove_size(i, k) {
            var j = $("#total_size" + i).val();
            var remove = parseInt(j) - 1;

            $("#sizes" + i + "_" + remove).remove();
            $("#total_size" + i).val(remove);

        }
    </script>

    <script>
        var imageArray = [];

        // Start Image gallery //
        function imagesPreview(input, placeToInsertImagePreview, productcount) {
            if (input.files && imageArray.length) {
                var a = Array.from(input.files);

                var b = imageArray;

                var c = b.concat(a);
                input.files = new FileListItem(c);
                imageArray = c;
            } else if (imageArray.length) {
                var a = new FileListItem(imageArray);
                input.files = new FileListItem(imageArray);
                imageArray = a;
            }
            if (input.files) {
                var filesAmount = input.files.length;
                imageArray = Array.from(input.files);
                var j = 0;
                for (i = 0; i < filesAmount; i++) {


                    var reader = new FileReader();

                    reader.onload = function (event) {
                        j++;
                        var id = productcount + '_img' + j;
                        {{!-- console.log("hii=" + id); --}}
                        $($.parseHTML('<span id="' + id +
                            '"><img style="max-height:100%;max-width:100px;margin:5px;cursor:pointer;" src="' +
                            event.target.result +
                            '"><span class="remove_img_preview" onclick="remove_image(\'' + id + '\',' +
                            productcount + ',' + j + ')"></span></span>')).appendTo(placeToInsertImagePreview);
                    }

                    reader.readAsDataURL(input.files[i]);

                }
            }
        };

        function remove_prod() {
            //$("#remove_product").attr("disabled","disabled");
            var j = $("#total").val();
            var remove = parseInt(j) - 1;
            if (confirm("Remove Product " + remove)) {
                $("#product" + remove).remove();
                $("#total").val(remove);
            }

        }
    </script>

    <script>
        function readURL(input, id) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#blah' + id)
                        .attr('src', e.target.result);
                };

                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>




    <script>
        function submit_product() {

            var total = $("#total").val();

            var image_file = new Array();
            var product_name = new Array();
            var cname = new Array();
            var product_sku = new Array();
            var product_hsn = new Array();
            var product_price = new Array();
            var catalog_pcs = new Array();
            var product_quantity = new Array();
            var product_weight = new Array();
            var product_gst = new Array();
            var product_stitch = new Array();
            var selected_size = new Array();
            var selected_color = new Array();
            var product_short_description = new Array();
            var product_full_description = new Array();
            var product_status = new Array();
            var product_meta_title = new Array();
            var product_meta_keyword = new Array();
            var product_meta_desc = new Array();

            var selected_cat = $("#selected_cat").val();

          {{!--   if (selected_cat == "") {
                $.growl.error({
                    message: 'Please Select Category Name',
                    location: 'tr'
                });
                return false;
            } --}}
            var all_pro_name = [];
            var all_pro_sku = [];

            for (i = 1; i < parseInt(total); i++) {

                all_pro_name.push($("#product_name" + i).val());
                all_pro_sku.push($("#product_sku" + i).val());
                var imagefile = $('#image_file' + i).prop('files')[0];
                {{!-- if (imagefile != undefined) {
                    var extension = imagefile.name.substr((imagefile.name.lastIndexOf('.') + 1));

                    if (extension == "jpg" || extension == "jpeg" || extension == "png" || extension == "") {
                        if ($('#image_file' + i).prop('files')[0] == undefined) {
                            $.growl.error({
                                message: 'Please Select Image Of Product ' + i,
                                location: 'tr'
                            });

                            return false;

                        }



                        if ($("#product_name" + i).val() == "") {

                            $.growl.error({
                                message: 'Please Insert Name Of Catalog ' + i,
                                location: 'tr'
                            });

                            return false;

                        }
                        if ($("#cnamename" + i).val() == "") {

                            $.growl.error({
                                message: 'Please Insert Short Name Of Catalog ' + i,
                                location: 'tr'
                            });

                            return false;

                        }

                        if ($("#selected_fabric" + i).val() == "") {

                            $.growl.error({
                                message: 'Please Select Fabric Of Catalog ' + i,
                                location: 'tr'
                            });

                            return false;

                        }

                        if ($("#product_price" + i).val() == "") {
                            $("#btnsubmit").css("pointer-events", "visible");
                            $.growl.error({
                                message: 'Please Insert Price Of Catalog ' + i,
                                location: 'tr'
                            });

                            return false;

                        }
                        if ($("#mrp_price" + i).val() == "") {
                            $("#btnsubmit").css("pointer-events", "visible");
                            $.growl.error({
                                message: 'Please Insert MRP Price Of Catalog ' + i,
                                location: 'tr'
                            });

                            return false;

                        }
                        if ($("#product_reseller_price" + i).val() == "") {
                            $("#btnsubmit").css("pointer-events", "visible");
                            $.growl.error({
                                message: 'Please Insert reseller Price Of Catalog ' + i,
                                location: 'tr'
                            });

                            return false;

                        }
                        if ($("#mrp_reseller_price" + i).val() == "") {
                            $("#btnsubmit").css("pointer-events", "visible");
                            $.growl.error({
                                message: 'Please Insert reseller MRP Price Of Catalog ' + i,
                                location: 'tr'
                            });

                            return false;

                        }

                        if ($("#catalog_pcs" + i).val() == "") {

                            $.growl.error({
                                message: 'Please Insert PCS Of Catalog ' + i,
                                location: 'tr'
                            });

                            return false;

                        }

                        if ($("#product_gst" + i).val() == "") {

                            $.growl.error({
                                message: 'Please Insert GST Of Catalog ' + i,
                                location: 'tr'
                            });

                            return false;

                        }

                        if ($("#product_weight" + i).val() == "") {

                            $.growl.error({
                                message: 'Please Insert Weight Of Catalog ' + i,
                                location: 'tr'
                            });

                            return false;

                        }

                        if ($("#product_stitch" + i).val() == "") {

                            $.growl.error({
                                message: 'Please Select Stitch Of Catalog ' + i,
                                location: 'tr'
                            });

                            return false;

                        }


                    } else {
                        $.growl.error({
                            message: 'You can only upload image with JPG, JPEG, PNG extension ',
                            location: 'tr'
                        });


                        return false;
                    }
                } else {
                    $.growl.error({
                        message: 'Please Select Image Of Product ' + i,
                        location: 'tr'
                    });


                    return false;
                } --}}
            }
            let map = {};
            let result = false;
            for (let i = 0; i < all_pro_name.length; i++) {

                if (map[all_pro_name[i]]) {
                    result = true;
                    break;
                }
                map[all_pro_name[i]] = true;
            }
            if (result) {
                console.log('Array contains duplicate elements');
                $.growl.error({
                    message: 'Duplication Of Product Name Is Not Valid',
                    location: 'tr'
                });
                return false;
            }


            var method = "add";
            $.ajax({

                type: "POST",
                data: {
                    all_pro_name: all_pro_name,
                    all_pro_sku: all_pro_sku,
                    total: total,
                    method: method
                },
                url: "/check_repeat_product",
                success: function (response) {

                    if (response == "ok") {
                        $("form").submit();
                    } else {
                        console.log("response",response);
                        $.growl.error({
                            message: 'Product Name Already Exists',
                            location: 'tr'
                        });
                        return false;
                    }
                }
            });

            $(".abc option").removeAttr('disabled');


        }

        function delete_catalog() {
            var delete_id = [];
            $.each($("input[name='delete_checkbox']:checked"), function () {
                delete_id.push($(this).val());
            });
            //alert("Id to Delete are: " + delete_id.join(", "));
            if (delete_id == "") {
                alert("Please Select a Category to Delete");
            } else {

                if (confirm('Are You Sure You Want To Delete?')) {
                    $.ajax({
                        type: "POST",
                        url: "category_delete.php?id=" + delete_id,
                        success: function (response) {
                            if (response == "error") {
                                alert("You cannot delete category whose subcategory is there!");
                            } else if (response == "ok") {
                                location.reload();
                            }
                        }
                    });
                    //alert(delete_id);

                }

            }
        }
    </script>
    <script>
        function get_subcat1() {

            var cat_id = $("#selected_cat").val();
            var subcat_id = $("#get_subcat").val();
            $(".extrablock").hide();
            var selectedcat = cat_id;

            var selctedkir = ['6', '3', '20', '10', '11'];
            var selctedwesnight = ['921', '923'];
            var selctedaccess = ['922'];
            var selctedsarr = ['5'];
            var selctedle = ['7'];
            let isFounded = selctedkir.some(ai => selectedcat.includes(ai));
            if (isFounded) {
                $(".kurtiesblock").show();
            }
            let isFounded_1 = selctedwesnight.some(ai => selectedcat.includes(ai));
            if (isFounded_1) {
                $(".western_night_wearblock").show();
            }
            let isFounded_2 = selctedaccess.some(ai => selectedcat.includes(ai));
            if (isFounded_2) {
                $(".accessories_block").show();
            }
            let isFounded1 = selctedsarr.some(ai => selectedcat.includes(ai));
            if (isFounded1) {
                $(".sareesblock").show();
            }
            let isFounded2 = selctedle.some(ai => selectedcat.includes(ai));
            if (isFounded2) {
                $(".lehengablock").show();
            }


            $.ajax({
                type: "POST",
                data: {
                    subcat_id: subcat_id
                },
                url: "/get_subcat_from_cat/" + cat_id,
                success: function (response) {
                    //alert(response);
                    console.log("response", response);
                    var result = response.result;
                    var responseOpt = '';
                   /* for (var prop in response) {

                        responseOpt += `<option value='${response[prop]._id}'>${response[prop].subcategory_name}</option>`
                    } */

                    for (var i = 0; i < result.length; i++) {
                                responseOpt += `<option value='${result[i]._id}'>${result[i].subcategory_name}</option>`;
                            }

                    document.getElementById("get_subcat").innerHTML = responseOpt;

                }
            });
        }
    </script>

</body>


</html>