<!DOCTYPE html>

<html lang="en" class="default-style layout-fixed layout-navbar-fixed">

<head>
    <title>Coupon title </title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="description"
        content="Empire Bootstrap admin template made using Bootstrap 4, it has tons of ready made feature, UI components, pages which completely fulfills any dashboard needs." />
    <meta name="keywords"
        content="Empire, bootstrap admin template, bootstrap admin panel, bootstrap 4 admin template, admin template">
    <meta name="author" content="Srthemesvilla" />
    <link rel="icon" type="image/x-icon" href="<?php echo  $favicon ?>">

    <!-- Google fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">

    <!-- Icon fonts -->
    <link rel="stylesheet" href="/assets/fonts/fontawesome.css">
    <link rel="stylesheet" href="/assets/fonts/ionicons.css">
    <link rel="stylesheet" href="/assets/fonts/linearicons.css">
    <link rel="stylesheet" href="/assets/fonts/open-iconic.css">
    <link rel="stylesheet" href="/assets/fonts/pe-icon-7-stroke.css">
    <link rel="stylesheet" href="/assets/fonts/feather.css">

    <!-- Core stylesheets -->
    <link rel="stylesheet" href="/assets/css/bootstrap-material.css">
    <link rel="stylesheet" href="/assets/css/shreerang-material.css">
    <link rel="stylesheet" href="/assets/css/uikit.css">

    <!-- Libs -->
    <link rel="stylesheet" href="/assets/libs/perfect-scrollbar/perfect-scrollbar.css">
    <link rel="stylesheet" href="/assets/libs/flot/flot.css">
    <link rel="stylesheet" href="/assets/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.css">
    <link rel="stylesheet" href="/assets/libs/datatables/datatables.css">
    <link rel="stylesheet" href="/assets/libs/dropzone/dropzone.css">
    <link rel="stylesheet" href="/assets/libs/bootstrap-select/bootstrap-select.css">
    <link rel="stylesheet" href="/assets/libs/bootstrap-multiselect/bootstrap-multiselect.css">
    <link rel="stylesheet" href="/assets/libs/select2/select2.css">
    <link rel="stylesheet" href="/assets/libs/bootstrap-tagsinput/bootstrap-tagsinput.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- jQuery UI library -->
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
</head>

<body>
    <style>
        .loader {
            border: 5px solid #c3bebefc;
            border-radius: 50%;
            border-top: 5px solid #3498db;
            width: 30px;
            height: 30px;
            -webkit-animation: spin 2s linear infinite;
            animation: spin 2s linear infinite;
        }

        /* Safari */
        @-webkit-keyframes spin {
            0% {
                -webkit-transform: rotate(0deg);
            }

            100% {
                -webkit-transform: rotate(360deg);
            }
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
    <!-- [ Preloader ] Start -->
    <div class="page-loader">
        <div class="bg-primary"></div>
    </div>
    <!-- [ Preloader ] End -->

    <!-- [ Layout wrapper ] Start -->
    <div class="layout-wrapper layout-2">
        <div class="layout-inner">
            <!-- [ Layout sidenav ] Start -->
            {{>admin/sidebar}}
            <!-- [ Layout sidenav ] End -->
            <!-- [ Layout container ] Start -->
            <div class="layout-container">
                <!-- [ Layout navbar ( Header ) ] Start -->
                {{>admin/header}}
                <!-- [ Layout navbar ( Header ) ] End -->

                <!-- [ Layout content ] Start -->
                <div class="layout-content">

                    <!-- [ content ] Start -->
                    <div class="container-fluid flex-grow-1 container-p-y">
                        <h4 class="font-weight-bold py-3 mb-0">Add Coupon</h4>
                        <div class="text-muted small mt-0 mb-4 d-block breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="index.php"><i class="feather icon-home"></i></a>
                                </li>
                                <li class="breadcrumb-item ">Coupon</li>
                                <li class="breadcrumb-item active">Add Coupon</li>
                            </ol>
                        </div>

                        <div class="card mb-4 col-md-3" style="float:left;margin-right:40px;">
                            <h6 class="card-header">Add New Coupon</h6>

                            <div class="card-body">
                                <!--<div class="form-group">
									<label class="form-label">
										<input type="checkbox" id="cart_limit" onclick="cart_limit()" name="cart_limit">Cart Limit
									</label>

								</div>-->
                                <script>
                                    function cart_limit() {
                                        var chk = $("#cart_limit").prop("checked");
                                        console.log(chk);
                                        if ($("#cart_limit").prop("checked") == true) {
                                            $("#selected_cat").attr('disabled', 'disabled');
                                            $("#selected_subcat").attr('disabled', 'disabled');
                                            $("#selected_brand").attr('disabled', 'disabled');
                                            $("#cart_limit_box").css("pointer-events", "auto");
                                            $("#customer_search").css("pointer-events", "none");

                                            $("#selected_cat").val("");
                                            $("#selected_subcat").val("");
                                            $("#selected_brand").val("");
                                            $("#user_id_hidden").val("");
                                        }
                                        else {
                                            $("#customer_search").css("pointer-events", "auto");
                                            $("#selected_cat").attr('disabled', false);
                                            $("#selected_subcat").attr('disabled', false);
                                            $("#selected_brand").attr('disabled', false);
                                            $("#cart_limit_box").css("pointer-events", "none");
                                            $("#cart_limit_box").val("");

                                        }
                                    }
                                </script>
                                <div class="form-group">
                                    <label class="form-label">
                                        <input type="radio" id="rupee" onclick="check_rupees()"
                                            name="coupon_disc">Rupees
                                    </label>
                                    &nbsp;&nbsp;&nbsp;<label class="form-label">
                                        <input type="radio" id="percentage" onclick="check_percent()"
                                            name="coupon_disc">Percentage
                                    </label>
                                </div>

                                <!-- <label>Add Users</label> -->
                                <!--<button type="button" id="add_cat" class="btn btn-primary" onclick="add_users()">Add Users</button><br>-->
                                <!-- 	<input type="text" class="form-control" id="customer_search" name="customer_search" autocomplete="off"> -->

                                <script type="text/javascript">
                                    function add_users() {
                                        $("#add_users").click();
                                    }

                                    var arr = "";
                                    var arr_label = "";
                                    $(function () {

                                        $("#customer_search").autocomplete({
                                            source: "ajaxfiles/autocustname.php",
                                            select: function (event, ui) {
                                                event.preventDefault();
                                                var value = ui.item.value;
                                                var label = ui.item.label;
                                                if (value)

                                                    arr += value + ",";
                                                arr_label += label + ",";
                                                $("#customer_search").val("");
                                                $("#user_id_hidden").val(arr);
                                                $("#customer_search").val(arr_label);
                                            }
                                        });
                                    });
                                </script>

                                <input id="user_id_hidden" name="user_id_hidden[]" value="" type="hidden">

                                <label class="form-label">Category</label>
                                <select class="select2-demo form-control" multiple name="selected_cat[]" id="selected_cat"
                                    onchange="get_subcat1()">
                                    <option value="">Select Category</option>
                                    {{#each sql_cat}}
                                    <option value="{{this._id}}">{{this.category_name}} </option>
                                    {{/each}}
                                </select>
                                <label class="form-label">Select Subcategories</label>
                                <select class="select2-demo form-control" multiple style="width: 100%"
                                      id="get_subcat" name="selected_subcat[]">
                                    <option value=""></option>
                                </select>
                                <label class="form-label">Brand</label>
                                <select class="select2-demo form-control" multiple name="selected_brand"
                                    id="selected_brand">
                                    <option value="">Select Brand</option>
                                    {{#each sql_brand}}
                                    <option value="{{this._id}}">{{this.brand_name}} </option>
                                    {{/each}}
                                </select>

                                <div class="form-group">
                                    <label class="form-label">Cart Limit</label>
                                    <input type="text" class="form-control" id="cart_limit_box">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Coupon Name</label>
                                    <input type="text" class="form-control" id="coupon_name" autofocus>
                                </div>
                                <div class="form-group" style="display:none;" id="rupee_sec">
                                    <label class="form-label">Rupees</label>
                                    <input type="number" class="form-control" id="rupees_1">
                                </div>
                                <div class="form-group" style="display:none;" id="percent_sec">
                                    <label class="form-label">Percentage</label>
                                    <input type="text" class="form-control" id="percent_1">
                                </div>
                                <!-- <div class="form-group" style="display:none;" id="point_sec">
									<label class="form-label">Point</label>
									<input type="text" class="form-control" id="point_1">
								</div> -->

                                <div class="form-group">
                                    <label class="form-label">Remark</label>
                                    <input type="text" class="form-control" id="remark">

                                </div>
                                <div class="form-group">
                                    <label class="form-label">Expiry Date</label>
                                    <input type="date" class="form-control" id="expiry_date">

                                </div>
                                <div class="form-group">
                                    <label class="form-label">Limitation</label>
                                    <input type="number" class="form-control" id="limitation">

                                </div>
                        <input type="hidden" value="{{subtypeIds}}" id="hidden_subcat_id">
                                <small class="form-text text-muted" id="error"
                                    style="display:none;color:red !important;"></small>
                                <button type="button" id="add_cat" class="btn btn-primary"
                                    onclick="add_coupon()">Add</button>
                            </div>
                        </div>
                        <div class="card col-md-8">
                            <div>
                                <button type="button" onclick="delete_category()"
                                    class="btn btn-danger icon-btn borderless">Delete</button>
                            </div>
                            <div class="card-datatable table-responsive">
                                <table id="user-list" class="table table-striped table-bordered">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th></th>
                                            <th>Sr. No.</th>
                                            <th>Active</th>
                                            <th>Coupon Name</th>
                                            <th>Rupees</th>
                                            <th>Percentage</th>
                                            <th>Cart Limit</th>
                                            <th>User</th>
                                            <th>Category</th>
                                            <th>Sub Category</th>
                                            <th>Brand</th>
                                            <th>Remark</th>
                                            <th>Expiry Date</th>
                                            <th>limitation</th>
                                        </tr>
                                    </thead>
                                     {{#each results}}
                                        <tr>
                                            <td>{{{this.checkbox}}}</td>
                                            <td>{{this.edit}}</td>
                                            <td>{{this.no}}</td>
                                            <td>{{this.active}}</td>
                                            <td>{{this.coupon_name}}</td>
                                            <td>{{this.rupees}}</td>
                                            <td>{{this.percentage}}</td>
                                            <td>{{this.cart_limit}}</td>
                                            <td>{{this.user}}</td>
                                            <td>{{this.category}}</td>
                                            <td>{{this.subcategory}}</td>
                                            <td>{{this.brand}}</td>
                                            <td>{{this.remark}}</td>
                                            <td>{{this.expiry_date}}</td>
                                            <td>{{this.limitation}}</td>
                                        </tr>
                                        {{/each}}
                                </table>
                            </div>
                        </div>


                    </div>
                    <script>
                        function edit_user(coupon_id) {
                            $("#edit_users").click();
                            $.ajax({
                                type: "POST",
                                url: "ajaxfiles/coupon_edit_add_process.php",
                                data: { coupon_id: coupon_id },
                                cache: false,
                                success: function (data) {
                                    $("#edit_user_section").html(data);
                                }
                            });

                        }
                        function remove_user(coupon_id) {
                            var user_id = [];
                            $.each($("input[name='remove_user_checkbox']:checked"), function () {
                                user_id.push($(this).val());
                            });

                            if (user_id == "") {
                                alert("Please Select a User to Delete");
                            } else {

                                if (confirm('Are You Sure You Want To Delete?')) {
                                    $.ajax({
                                        type: "POST",
                                        url: "ajaxfiles/remove_user_from_coupon.php?id=" + user_id + "&coupon_id=" + coupon_id,
                                        success: function (response) {
                                            if (response == "ok") {
                                                location.reload();
                                            }
                                        }
                                    });
                                }
                            }
                        }
                        function add_user(coupon_id) {

                            $("#add_users").click();
                            $.ajax({
                                type: "POST",
                                url: "ajaxfiles/coupon_user_add_process.php",
                                data: { coupon_id: coupon_id },
                                cache: false,
                                success: function (data) {
                                    $("#add_user_section").html(data);
                                }
                            });
                        }
                        function add_user_for_coupon(coupon_id) {
                            var user_id = [];
                            $.each($("input[name='add_user_checkbox']:checked"), function () {
                                user_id.push($(this).val());
                            });

                            if (user_id == "") {
                                alert("Please Select a User to Add");
                            } else {

                                if (confirm('Are You Sure You Want To Add?')) {
                                    $.ajax({
                                        type: "POST",
                                        url: "ajaxfiles/add_user_into_coupon.php?id=" + user_id + "&coupon_id=" + coupon_id,
                                        success: function (response) {
                                            if (response == "ok") {
                                                location.reload();
                                            }
                                        }
                                    });
                                }
                            }
                        }
                    </script>
                    <a data-toggle="modal" data-target="#add_users_modal" id="add_users"></a>
                    <div class="modal" id="add_users_modal" tabindex="-1" role="dialog" aria-label="myModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog ">
                            <div class="modal-content ">
                                <div class="modal-header">

                                    <button type="button" class="close" data-dismiss="modal"
                                        aria-hidden="true">&times;</button>
                                </div>
                                <div class="modal-body" style="max-height:500px;overflow-y:scroll;padding-top: 0px;">

                                    <div class="tt-modal-addtocart">
                                        <div class="row">
                                            <div class="col-12 col-lg-12" id="add_user_section">
                                                <div align="center">
                                                    <div class="loader"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <a data-toggle="modal" data-target="#edit_users_modal" id="edit_users"></a>
                    <div class="modal" id="edit_users_modal" tabindex="-1" role="dialog" aria-label="myModalLabel"
                        aria-hidden="true">
                        <div class="modal-dialog ">
                            <div class="modal-content ">
                                <div class="modal-header">

                                    <button type="button" class="close" data-dismiss="modal"
                                        aria-hidden="true">&times;</button>
                                </div>
                                <div class="modal-body" style="max-height:500px;overflow-y:scroll;padding-top: 0px;">

                                    <div class="tt-modal-addtocart">
                                        <div class="row">
                                            <div class="col-12 col-lg-12" id="edit_user_section">
                                                <div align="center">
                                                    <div class="loader"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- [ content ] End -->

                    <!-- [ Layout footer ] Start -->
                    {{>admin/footer}}
                    <!-- [ Layout footer ] End -->

                </div>
                <!-- [ Layout content ] Start -->

            </div>
            <!-- [ Layout container ] End -->
        </div>
        <!-- Overlay -->
        <div class="layout-overlay layout-sidenav-toggle"></div>
    </div>
    <!-- [ Layout wrapper] End -->
    <style>
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

        input:checked+.slider {
            background-color: #2196F3;
        }

        input:focus+.slider {
            box-shadow: 0 0 1px #2196F3;
        }

        input:checked+.slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(26px);
            transform: translateX(26px);
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }
    </style>
    <!-- Core scripts -->
    <script src="/assets/js/pace.js"></script>
    <!-- <script src="/assets/js/jquery-3.2.1.min.js"></script> tables not work in jquery-3.3.1 js -->
    <script src="/assets/libs/popper/popper.js"></script>
    <script src="/assets/js/bootstrap.js"></script>
    <script src="/assets/js/sidenav.js"></script>
    <script src="/assets/js/layout-helpers.js"></script>
    <script src="/assets/js/material-ripple.js"></script>

    <!-- Libs -->
    <script src="/assets/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="/assets/libs/eve/eve.js"></script>
    <script src="/assets/libs/flot/flot.js"></script>
    <script src="/assets/libs/flot/curvedLines.js"></script>
    <script src="/assets/libs/chart-am4/core.js"></script>
    <script src="/assets/libs/chart-am4/charts.js"></script>
    <script src="/assets/libs/chart-am4/animated.js"></script>
    <script src="/assets/libs/raphael/raphael.js"></script>
    <script src="/assets/libs/morris/morris.js"></script>
    <script src="/assets/libs/moment/moment.js"></script>
    <script src="/assets/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.js"></script>
    <script src="/assets/libs/datatables/datatables.js"></script>
    <script src="/assets/libs/dropzone/dropzone.js"></script>
    <script src="/assets/libs/bootstrap-select/bootstrap-select.js"></script>
    <script src="/assets/libs/bootstrap-multiselect/bootstrap-multiselect.js"></script>
    <script src="/assets/libs/select2/select2.js"></script>
    <script src="/assets/libs/bootstrap-tagsinput/bootstrap-tagsinput.js"></script>


    <!-- Demo -->
    <script src="/assets/js/demo.js"></script>
    <script src="/assets/js/analytics.js"></script>
    <script src="/assets/js/pages/forms_selects.js"></script>

    <script>
        function chkapp(request_id) {
            var appview = "";
            if ($("#chk" + request_id).prop('checked') == true) {
                appview = 1;
            }
            else {
                appview = 0
            }
            var form_data = new FormData();
            form_data.append('request_id', request_id);
            form_data.append('appview', appview);
            $.ajax({

                type: "POST",
                data: form_data,
                dataType: 'text',
                contentType: false,
                cache: false,
                processData: false,
                url: "ajaxfiles/monthly_coupon_process.php",
                success: function (response) {
                    //if(response == "ok"){
                    location.reload();
                    //}
                }

            });
        }
        function active(request_id) {
            var appview = "";
            if ($("#act_" + request_id).prop('checked') == true) {
                appview = 1;
            }
            else {
                appview = 0
            }
            var form_data = new FormData();
            form_data.append('request_id', request_id);
            form_data.append('appview', appview);
            $.ajax({

                type: "POST",
                data: form_data,
                dataType: 'text',
                contentType: false,
                cache: false,
                processData: false,
                url: "ajaxfiles/active_coupon_process.php",
                success: function (response) {
                    //if(response == "ok"){
                    location.reload();
                    //}
                }

            });
        }
        function check_rupees() {
            var rupee = $("#rupee").prop("checked");

            if (rupee == true) {
                $("#rupee_sec").show();
                $("#percent_sec").hide();
                $("#percent_1").val("");
                $("#point_sec").hide();
                $("#point_1").val("");
            }
            else if (rupee == false) {
                $("#rupee_sec").hide();
            }
        }
        function check_percent() {
            var percentage = $("#percentage").prop("checked");
            if (percentage == true) {
                $("#percent_sec").show();
                $("#rupee_sec").hide();
                $("#rupees_1").val("");
                $("#point_sec").hide();
                $("#point_1").val("");
            }
            else if (percentage == false) {
                $("#percent_sec").hide();
            }
        }
        function check_point() {
            var point = $("#point").prop("checked");
            if (point == true) {
                $("#point_sec").show();
                $("#rupee_sec").hide();
                $("#rupees_1").val("");
                $("#percent_sec").hide();
                $("#percent_1").val("");
            }
            else if (point == false) {
                $("#point_sec").hide();
            }
        }
    </script>

    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.0/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.0/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.4.0/js/buttons.print.min.js"></script>
    <link rel="stylesheet" type="text/css"
        href="https://cdn.datatables.net/buttons/1.4.0/css/buttons.dataTables.min.css">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.27/build/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.27/build/vfs_fonts.js"></script>

    <script>
        function get_subcat1() {

            var cat_id = $("#selected_cat").val();
            $.ajax({
                type: "POST",
                url: "/retail_admin/get_subcat_from_cat/" + cat_id,
                success: function (response) {
                    //alert(response);
                    // $("#selected_subcat").html(response);
                      var result = response.result;
                    var responseOpt = '';

                     for (var i = 0; i < result.length; i++) {
                                responseOpt += `<option value='${result[i]._id}'>${result[i].subcategory_name}</option>`;
                            }
   document.getElementById("get_subcat").innerHTML = responseOpt;
                }
            });

        }
        function add_coupon() {
            var user_id_hidden = $("#user_id_hidden").val();
            var coupon_name = $("#coupon_name").val();
            var rupees = $("#rupees_1").val();
            var limitation = $("#limitation").val();

            var percent = $("#percent_1").val();
            var point = $("#point_1").val();
            var selected_cat = $("#selected_cat").val();
            var cart_limit_box = $("#cart_limit_box").val();

            var selected_subcat = $("#get_subcat").val();
            var selected_brand = $("#selected_brand").val();
            console.log(selected_cat);
            var remark = $("#remark").val();
            var expiry_date = $("#expiry_date").val();
            var rupee = $("#rupee").prop("checked");
            var percentage = $("#percentage").prop("checked");
            var pointee = $("#point").prop("checked");
            var affiliate = 0;
            if ($('#affiliate').is(":checked")) {
                affiliate = 1;

            }

            var form_data = new FormData();

            form_data.append('coupon_name', coupon_name);
            form_data.append('rupees', rupees);
            form_data.append('point', point);
            form_data.append('affiliate', affiliate);
            form_data.append('selected_cat', selected_cat);
            form_data.append('selected_subcat', selected_subcat);
            form_data.append('selected_brand', selected_brand);
            form_data.append('limitation', limitation);
            form_data.append('percent', percent);
            form_data.append('remark', remark);
            form_data.append('expiry_date', expiry_date);
            form_data.append('user_id_hidden', user_id_hidden);
            form_data.append('cart_limit_box', cart_limit_box);

            if (coupon_name == "") {
                $("#error").html("Enter Coupon Name");
                $("#error").show();
            }
            else if (rupee == false && percentage == false && pointee == false) {
                $("#error").html("Select Any Discount Method");
                $("#error").show();
            }
            else if (rupee == true && rupees == "") {
                $("#error").html("Enter Rupees");
                $("#error").show();
            }
            else if (percentage == true && percent == "") {
                $("#error").html("Enter Percentage");
                $("#error").show();
            }
            else if (pointee == true && point == "") {
                $("#error").html("Enter Point");
                $("#error").show();
            }
            // else if(expiry_date == "")
            // {
            // $("#error").html("Select Expiry Date");
            // $("#error").show();
            // }else if(limitation == "")
            // {
            // $("#error").html("Enter Limitation Of Coupon");
            // $("#error").show();
            // }
            else {
                $("#error").hide();
                $("#add_cat").attr("disabled", "disabled");
                $.ajax({

                    type: "POST",
                    data: form_data,
                    dataType: 'text',
                    contentType: false,
                    cache: false,
                    processData: false,
                    url: "/retail_admin/coupon_add_process",

                    success: function (response) {
                        if (response == "ok") {
                            location.reload();
                        } else if (response == "exist") {
                            $("#error").html("coupon Name Already Exists.");
                            $("#error").show();
                        }
                    }

                });
            }
        }

        function delete_category() {
            var delete_id = [];
            $.each($("input[name='delete_checkbox']:checked"), function () {
                delete_id.push($(this).val());
            });
            //alert("Id to Delete are: " + delete_id.join(", "));
            if (delete_id == "") {
                alert("Please Select a Coupon to Delete");
            } else {

                if (confirm('Are You Sure You Want To Delete?')) {
                    $.ajax({
                        type: "POST",
                        url: "coupon_delete.php?id=" + delete_id,
                        success: function (response) {
                            if (response == "ok") {
                                location.reload();
                            }
                        }
                    });
                    //alert(delete_id);

                }

            }
        }



    </script>

</body>


</html>